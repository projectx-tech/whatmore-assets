"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[9164],{92964:function(e,t,i){i(47313);var n=i(91896),r=i(46417);t.Z=function(e){return(0,r.jsx)(n.Z,{height:e.height,width:e.width,url:e.url,isPlaying:e.isPlaying,timeUpdateCallback:e.timeUpdateCallback,event:e.event})}},91896:function(e,t,i){i.d(t,{Z:function(){return f}});var n=i(47313),r=i(7300),l=i(46422),o=i(8933),a=i(33175),s=i(32887),d=i(99543),u=i(60058),h=i(73433),c=i(49854),p=i(34862),y=(i(68743),i(30364)),g=i(46417);function m(e){var t,i,r;const[o,s]=(0,l.Z)(),[m,v]=(0,n.useState)(n.useRef()),w=e.posterImage,[f,P]=(0,d.j1)("whatmoreVideoPlayerPoolBlessed"),[x,b]=(0,n.useState)(!0),[j,E]=(0,n.useState)(!1),C=e.timeUpdateCallback,{whatmoreIsPreviewMode:_}=(0,n.useContext)(y.I),M=null!==(t=e.isVideoMuted)&&void 0!==t?t:o,I=null!==(i=e.height)&&void 0!==i?i:"100%",k=null!==(r=e.width)&&void 0!==r?r:"100%",V=(0,d.MO)("whatmoreShopId");(0,n.useLayoutEffect)((()=>{var t;m.current&&f&&(0==m.current.children.length?((t=(0,u.Bi)(m.current,e.url,M||!e.isPlaying,e.isPlaying)).addEventListener("loadeddata",(()=>{b(!1)})),C&&t.addEventListener("timeupdate",(e=>{var i,n;t&&C(null!==(i=t.currentTime)&&void 0!==i?i:0,null!==(n=t.duration)&&void 0!==n?n:0)}))):((t=m.current.children[0]).muted=M||!e.isPlaying,e.isPlaying?t.play():(t.pause(),(0,c.dF_)(V)&&e.source==h.j.CAROUSEL_EVENT_OPENED&&(!e.isPlaying&&t.play(),setTimeout((()=>{!e.isPlaying&&t.pause()}),p.G6?1900:800)))))}),[M,e.isPlaying,f,x]),(0,n.useLayoutEffect)((()=>()=>{m.current&&0!=m.current.children.length&&(0,u.P7)(m.current)}),[]);return(0,g.jsxs)("div",{style:{display:"flex",flexFlow:"column nowrap",width:k,height:I,overflow:"hidden",backgroundColor:_?(0,c.WNM)(V):(0,c.Gy3)(V)},children:[(0,g.jsx)("div",{ref:m,style:{width:x?"0px":"100%",height:x?"0px":_?(0,c.Yiq)(V):(0,c.MT6)(V)},className:"whatmore-video-player-ios-holder"}),x&&j?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{style:{width:"100%",height:"100%",position:"relative"},children:(0,g.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,g.jsx)("img",{src:w,height:I,width:k,style:{animation:e.isPlaying?"fadeInFromNoneAnimation 1.5s infinite":""}})})})}):x&&!j&&(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{style:{width:"100%",height:"100%",position:"relative"},children:[(0,g.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:(0,g.jsx)("img",{src:w,height:I,width:k,onLoad:()=>{E(!0)},style:{animation:e.isPlaying?"fadeInFromNoneAnimation 1.5s infinite":""}})}),(0,g.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,g.jsx)(a.Z,{width:k,height:I,style:{position:"absolute",top:"50%",left:"50%",opacity:"0.6"}})})]})})]})}var v=function(e){var t;return(0,g.jsx)(m,{height:e.height,width:e.width,url:e.url,isPlaying:e.isPlaying,timeUpdateCallback:e.timeUpdateCallback,isVideoMuted:null!==(t=e.isVideoMuted)&&void 0!==t?t:null,source:e.source,posterImage:e.posterImage})};function w(e){var t,i,r;const[o,s]=(0,l.Z)(),[u,m]=(0,n.useState)(!1),[v,w]=(0,n.useState)(!1),f=e.setDuration,P=(0,n.useRef)(null),x=(0,d.MO)("whatmoreShopId"),b=e.timeUpdateCallback,{whatmoreIsPreviewMode:j}=(0,n.useContext)(y.I),E=null!==(t=e.height)&&void 0!==t?t:"100%",C=null!==(i=e.width)&&void 0!==i?i:"100%",_=null!==(r=e.isVideoMuted)&&void 0!==r?r:o,M=null===e||void 0===e?void 0:e.posterImage;return(0,n.useEffect)((()=>{P.current&&(e.isPlaying?P.current.paused&&P.current.play():P.current.pause(),b&&P.current.addEventListener("timeupdate",(e=>{var t,i;P.current&&b(null!==(t=P.current.currentTime)&&void 0!==t?t:0,null!==(i=P.current.duration)&&void 0!==i?i:0)})))}),[e.isPlaying]),(0,g.jsxs)("div",{style:{display:"flex",flexFlow:"column nowrap",width:C,height:E,overflow:"hidden",backgroundColor:j?(0,c.WNM)(x):(0,c.Gy3)(x)},children:[(0,g.jsx)("div",{style:{width:u?"100%":"0px",height:u?j?(0,c.Yiq)(x):(0,c.MT6)(x):"0px"},children:(0,g.jsx)("video",{ref:P,className:"whatmore-video-player",preload:"auto",loop:!0,playsInline:!0,muted:!(!_&&e.isPlaying),src:e.url,onLoadedData:()=>{m(!0),e.isPlaying&&P.current&&P.current.play(),(0,c.dF_)(x)&&e.source==h.j.CAROUSEL_EVENT_OPENED&&(!e.isPlaying&&P.current&&P.current.play(),setTimeout((()=>{!e.isPlaying&&P.current&&P.current.pause()}),p.G6?1900:800))},onLoadedMetadata:()=>{P.current&&f&&f(P.current.duration)},poster:M})}),!u&&v?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{style:{width:"100%",height:"100%",position:"relative"},children:(0,g.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,g.jsx)("img",{src:M,height:E,width:C,style:{animation:e.isPlaying?"fadeInFromNoneAnimation 1.5s infinite":""}})})})}):!u&&!v&&(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{style:{width:"100%",height:"100%",position:"relative"},children:[(0,g.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:(0,g.jsx)("img",{src:M,height:E,width:C,onLoad:()=>{w(!0)},style:{animation:e.isPlaying?"fadeInFromNoneAnimation 1.5s infinite":""}})}),(0,g.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,g.jsx)(a.Z,{width:C,height:E,style:{position:"absolute",top:"50%",left:"50%",opacity:"0.6"}})})]})})]})}var f=function(e){var t,i,l,a;return(0,r.WJ)(e.event)?(0,g.jsx)(s.Z,{height:e.height,width:e.width,url:e.url,isPlaying:e.isPlaying,timeUpdateCallback:e.timeUpdateCallback}):1==(0,n.useContext)(o.EventClickComponentContext).isIOS&&1==(0,d.MO)("whatmoreVideoPlayerPoolBlessed")?(0,g.jsx)(v,{height:e.height,width:e.width,url:e.url,isPlaying:e.isPlaying,timeUpdateCallback:e.timeUpdateCallback,isVideoMuted:null!==(l=e.isVideoMuted)&&void 0!==l?l:null,source:e.source,posterImage:null===(a=e.event)||void 0===a?void 0:a.poster_image}):(0,g.jsx)(w,{height:e.height,width:e.width,url:e.url,isPlaying:e.isPlaying,timeUpdateCallback:e.timeUpdateCallback,isVideoMuted:null!==(t=e.isVideoMuted)&&void 0!==t?t:null,setDuration:e.setDuration,source:e.source,posterImage:null===(i=e.event)||void 0===i?void 0:i.poster_image})}},84892:function(e,t,i){i.d(t,{Z:function(){return c}});var n=i(47313),r=i(23933),l=i(80868),o=i(68984),a=i(7300),s=i(32887),d=i(34862),u=i(46417);var h=function(e){var t,i;const l=(0,n.useRef)(null),[o,a,s]=(0,r.YD)({triggerOnce:!0}),h=null!==(t=e.height)&&void 0!==t?t:"100%",c=null!==(i=e.width)&&void 0!==i?i:"100%";return(0,n.useEffect)((()=>{l.current&&(e.isPlaying?l.current.play():(d.G6&&l.current.play(),l.current.pause()))}),[e.isPlaying,a]),(0,u.jsx)("div",{ref:o,style:{width:h,height:c,overflow:"hidden"},children:a?(0,u.jsx)("video",{ref:l,className:"whatmore-video-player",width:c,height:h,preload:"metadata",loop:!0,playsInline:!0,poster:e.isPlaying?e.url:"",muted:!0,src:e.url,style:{backgroundColor:"white"}}):(0,u.jsx)("div",{width:c,height:h,ref:e=>{e&&e.style.setProperty("display","block","important")}})})};var c=function(e){var t,i,d;const[c,p,y]=(0,r.YD)({triggerOnce:!0});if((0,a.WJ)(e.event))return(0,u.jsx)(s.Z,{height:e.height,width:e.width,url:e.url,isPlaying:e.isPlaying,timeUpdateCallback:e.timeUpdateCallback});const g=null!==(t=e.pauseFromPlayTimeInMs)&&void 0!==t?t:200;if((0,o.KE)())return(0,u.jsx)(h,{height:"100%",width:"100%",url:(0,l.V)(e.url),isPlaying:e.isPlaying,pauseFromPlayTimeInMs:g});const m=(0,n.useRef)(null),v=null!==(i=e.height)&&void 0!==i?i:"100%",w=null!==(d=e.width)&&void 0!==d?d:"100%";return(0,n.useEffect)((()=>{m.current&&(e.isPlaying?m.current.play():m.current.pause())}),[e.isPlaying,p]),(0,u.jsx)("div",{ref:c,style:{width:v,height:w,overflow:"hidden"},children:p?(0,u.jsx)("video",{ref:m,className:"whatmore-video-player",width:w,height:v,preload:"metadata",loop:!0,playsInline:!0,muted:!0,src:(0,l.V)(e.url),style:{backgroundColor:"white"}}):(0,u.jsx)("div",{width:w,height:v,ref:e=>{e&&e.style.setProperty("display","block","important")}})})}},73433:function(e,t,i){i.d(t,{j:function(){return n}});const n={BANNER:"banner",CAROUSEL_EVENT_OPENED:"carousel_event_opened",CAROUSEL_THUMBNAIL_VIEW:"carousel_thumbnail_view",STORY_EVENT_OPENED:"story_event_opened",STORY_THUMBNAIL_VIEW:"story_thumbnail_view"}},60058:function(e,t,i){i.d(t,{Bi:function(){return a},P7:function(){return d},QV:function(){return s},UD:function(){return r},b5:function(){return o}});var n=i(99543);const r=6;function l(){const e=(0,n.MO)("whatmoreVideoPlayerPool");var t=document.createElement("video");return t.setAttribute("class","whatmore-video-player whatmore-main-video-player-from-pool"),t.setAttribute("width","100%"),t.setAttribute("src","https://whatmore-other-assets.b-cdn.net/whatmore/dummy_for_video_pool_3s_muted_11kb.mp4"),t.muted=!0,t.setAttribute("height","100%"),t.setAttribute("preload","metadata"),t.setAttribute("loop",""),t.setAttribute("playsinline",""),t.setAttribute("x-webkit-airplay","allow"),t.controls=!1,e.appendChild(t),t}const o=function(e){for(let t=1;t<=e;t++)l();(0,n.bU)("whatmoreVideoPlayerPoolInitiated",!0)};const a=function(e,t,i,r){(0,n.MO)("whatmoreVideoPlayerPool");const l=function(e,t,i){var r=(l=(0,n.MO)("whatmoreVideoPlayerPool").children,l.length>0?l[0]:null);var l;if(!r)throw new Error("Whatmore :: not enough blessed videos available in video pool.");return r.setAttribute("src",e),r.muted=t,r.play().then((()=>{!i&&r.pause()})).catch((e=>{})),r}(t,i,r);return e.innerHTML="",e.appendChild(l),l},s=async function(){const e=(0,n.MO)("whatmoreVideoPlayerPool"),t=(0,n.MO)("whatmoreVideoPlayerPoolInitiated");t||o(r);var i=[];for(let n of e.children){n.muted=!0;var l=n.play().then((e=>(!t&&n.pause(),e)));i.push(l)}await Promise.all(i).then((e=>{(0,n.bU)("whatmoreVideoPlayerPoolBlessed",!0)})).catch((e=>{console.error("Whatmore :: Error while blessing "+e.message)}))},d=function(e){const t=(0,n.MO)("whatmoreVideoPlayerPool"),i=e.children[0];i.muted=!0,!i.paused&&i.pause(),t.appendChild(i)}}}]);