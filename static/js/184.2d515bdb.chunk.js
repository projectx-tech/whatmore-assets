"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[184],{3388:function(e,t,n){n.d(t,{OC:function(){return c},e8:function(){return i},kT:function(){return o},kW:function(){return s},xg:function(){return r}});const o=function(e,t){return!((void 0==e.products||0==e.products.length)&&(void 0==e.cta||0==e.cta.length))},r=function(e,t){return!(void 0==e.products||0==e.products.length)},i=function(e,t){if(null!=e)return e.filter((e=>1==o(e)))},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=e)return t?e.events[0].events:e.events};const c=function(e,t){var n;if(null==e)return[];if(!("eventsets"in e))return[];const o=null!==(n=e.eventsets[t])&&void 0!==n?n:null;return o?function(e){if(null==e||0==e.length)return[];let t=[];return e.forEach((e=>{e.events.forEach((e=>{t.push(e)}))})),t}(o):[]}},2209:function(e,t,n){n.r(t);var o=n(7313),r=n(9854),i=n(2860),s=n(7753),c=n(5160),u=n(6967),l=n(5380),a=n(58),d=n(8984),h=n(4669),f=n(513),g=n(9302),v=n(7381),p=n(2575),m=n(7300),w=n(6524),_=n(3388),E=n(7643),S=n(778),j=n(8811),I=n(6417);const x=(0,p.Z)({key:"whatmore-css-wsv"}),T=o.lazy((()=>Promise.all([n.e(819),n.e(577),n.e(351),n.e(955),n.e(926),n.e(303),n.e(218),n.e(587)]).then(n.bind(n,3218))));t.default=function(e){const[t,n]=(0,o.useState)(),[p,k]=(0,o.useState)(),[y]=(0,s.j1)("isInDesignMode"),[L]=(0,s.j1)("isDemoBrand"),[O,C]=(0,o.useState)(-2),[M]=(0,s.j1)("whatmoreShopId"),b=(0,s.MO)("isLandingSharedLink"),D=(0,s.MO)("whatmoreShareTemplateId"),V=((0,s.MO)("whatmoreShareStoryId"),(0,s.MO)("whatmoreShareEventId")),W=(0,s.MO)("whatmoreLandingLocationType"),P=(0,s.MO)("whatmoreLoggingActive"),{whatmoreWidgetSourceDetails:B}=(0,o.useContext)(j.I);var F=(0,r.efR)(M)?i.Dm+"/get_eventset/":i.Gc+"/get_eventset/";(0,o.useEffect)((()=>{(0,u.hb)()}),[]),(0,o.useEffect)((()=>{(0,h.ll)(M)}),[]),(0,o.useEffect)((()=>{null==t||0==t.length||p||!(0,d.KE)()||(0,s.MO)("whatmoreVideoPlayerPoolInitiated")||(0,a.b5)(a.UD)}),[t]),(0,o.useEffect)((()=>{C(-1);const e=w.NX,t=(0,w.H1)(W),o=F.toString()+M.toString()+"?eventset_type="+e+"&source="+t+"&source_id="+M;fetch(o).then((e=>e.json())).then((t=>(0,_.OC)(t,e))).then((e=>(n(e),e))).catch((e=>{k(e.message)}))}),[]),(0,o.useEffect)((()=>{C(-2)}),[t]),(0,o.useEffect)((()=>{null==t||0==t.length||p||b&&"template-embed"==(0,w.zv)(D)&&null!=V&&t.forEach(((e,t)=>{V==e.event_id&&H(e,!0,t)}))}),[t]);const K=B.landingLocationType,G=B.templateType,H=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((0,d.KE)()&&!t&&(0,a.QV)(),(0,m.B6)(e)||(0,m.WJ)(e))return y||L||(async()=>{const t=(0,w.NY)(K)+(0,w.dS)(G)+"_"+(null===e||void 0===e?void 0:e.event_id);(0,c.wh)(e),(0,h.Tc)(M,i.h7,i.dU),(0,u.H4)(e.event_id,e.products,"spotlight","video_popup",t)})(),void C(n)};function N(){return(0,I.jsx)(I.Fragment,{})}return null==t||0==t.length||p?(0,I.jsx)("div",{}):(P&&(0,v.EI)(t),(0,r.B$L)(M)&&O<0&&null!==localStorage.getItem("_whatmore_spotlight_viewed")?(0,I.jsx)(I.Fragment,{}):(localStorage.setItem("_whatmore_spotlight_viewed",!0),(0,I.jsx)(g.C,{value:x,children:-1===O||0===t.length?(0,I.jsx)(N,{}):-2===O&&t.length>0?(0,I.jsx)("div",{children:(0,I.jsx)(E.u,{userInteractionType:S.K.SPOTLIGHT_WIDGET_VIEW,event:t[0],productList:t[0].products,cta:t[0].cta,triggerFlag:!y&&!L,children:(0,I.jsx)(l.Z,{event:t[0],inVideoClick:H,closeClick:e=>{e.stopPropagation(),C(-1)},isSpotlight:!0})})}):(0,I.jsx)("div",{children:(0,I.jsx)(o.Suspense,{children:(0,I.jsx)(E.u,{userInteractionType:S.K.EVENT_VIEW,event:t[0],productList:t[0].products,cta:t[0].cta,triggerFlag:!y&&!L,children:(0,I.jsx)(T,{events:t,index:O,onBack:function(){(0,r.n2L)(M)&&(0,s.MO)("whatmoreAddedToCart")&&(0,f.D)(M,(()=>{}),100,window.location.hostname),C(-2)},template:"template-embed"})})})})})))}}}]);