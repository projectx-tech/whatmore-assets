"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[491],{4295:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var o=r(9950),n=r(1941),i=r(5830),l=(r(6125),r(4365),r(6614),r(1348)),s=r(3788),a=r(7973),c=r(9879),d=r(4414);var u=function(e){var t,r;const n=(0,i.Xd)("whatmorePrimaryFont"),u=(0,i.Xd)("whatmoreSecondaryColor"),p=(0,i.Xd)("whatmoreShopId"),[h,f]=(0,o.useState)(!1),x=e.storyId,m=(0,s.s)(e.imageUrl),g=e.title,v=e.onClick,y=e.template,w=(0,l.ivI)(p),b="template-stories-a"===y?"50%":"30%",j=e.tileSize,S=.12*j*(0,l.cYm)(p),C=null!==(t=(0,l.Pjz)(p))&&void 0!==t?t:n;let k=null!==(r=(0,l.qAx)(p))&&void 0!==r?r:[u,w,u,w,u];Array.isArray(k)||(k=Array(5).fill(k));const z=(0,o.useRef)(0),E=(0,o.useRef)(null),F=(0,o.useRef)(null);return(0,o.useEffect)((()=>{F.current&&F.current.play();const e=document.querySelector('.whatmore-base:has(.whatmore-widget[data-wh="stories"])');e&&function t(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const o=e.querySelector("#storiesLoader");o?o.style.display="none":r<10&&setTimeout((()=>t(r+1)),100)}()}),[]),(0,o.useEffect)((()=>{const e=E.current,t=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const r=e.target;r.src=r.dataset.src,t.unobserve(r)}}))}),{rootMargin:"0px 100px 0px 0px",threshold:0});return e&&t.observe(e),()=>{e&&t.unobserve(e)}}),[m]),(0,d.jsxs)("div",{style:{display:"flex",flexFlow:"column nowrap",justifyContent:"center",alignItems:"center",flexShrink:0,height:"fit-content",width:j*(0,l.rMH)(p)+"px",marginLeft:"10px",marginRight:"10px",marginTop:"10px",marginBottom:"10px",cursor:"pointer"},onClick:()=>{f(!0),v(x)},className:[h?"whatmore-scale-on-tap":""].join(" "),children:[(0,d.jsx)("div",{style:{display:"flex",boxSizing:"border-box",flexFlow:"column nowrap",justifyContent:"center",flexShrink:0,height:"fit-content",width:"fit-content",borderRadius:b,boxShadow:"0px 2px 1px 0px "+k[0]+"50, 0px -2px 1px 0px "+k[1]+"50, 2px 0px 1px 0px "+k[2]+"50, -2px 0px 1px 0px "+k[3]+"80, 2px -2px 1px 0px "+k[4]+"80, -2px 2px 1px 0px "+k[0]+"DA, 2px 2px 1px 0px "+k[1]+"DA, -2px -2px 1px 0px "+k[2]+"DA"},children:(0,d.jsx)("div",{className:"whatmore-story-thumbnail-wrapper",style:{flexShrink:0,objectFit:"cover",height:j+"px",width:j+"px",borderRadius:b,border:"3px solid white",backgroundColor:"#343434"===u?"#d3d3d3":u,overflow:"hidden"},children:"video"==(0,a.B)(m)?(0,d.jsx)(c.A,{height:"100%",width:"100%",url:m,isPlaying:!0,event:{event_type:"video"},borderRadius:b}):(0,d.jsx)("img",{ref:E,className:"whatmore-story-thumbnail","data-src":m.startsWith("https://cdn.shopify.com")?m.split("?")[0]+"?width=400&height=400":m,loading:"lazy",style:{objectFit:"cover",width:"100%",height:"100%",backgroundColor:"white"},alt:"story",onError:function(){if(z.current<3){let t=(0,s.s)(e.imageUrl);E.current.src="",E.current.src=t,z.current=z.current+1}else console.log("Failed to load image after several attempts"),E.current.src="https://d2oouab8j9eigo.cloudfront.net/background_white.png"}})})}),(0,d.jsx)("div",{style:{display:"flex",flexFlow:"column nowrap",justifyContent:"center",flexShrink:0,height:"fit-content",width:"100%",marginTop:"10px"},children:(0,d.jsx)("p",{ref:e=>{e&&e.style.setProperty("font-size",S+"px","important")},style:{textAlign:"center",color:(0,l.o9q)(p),fontFamily:C,fontWeight:"normal",lineHeight:"110%",margin:0,padding:0,overflow:"hidden",textOverflow:"ellipsis",width:"auto"},children:null===g||void 0===g?void 0:g.substring(0,24)})})]})},p=r(5873),h=r(572),f=r(3059),x=(0,f.A)((0,d.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft"),m=(0,f.A)((0,d.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");const g=(0,r(8603).A)({key:"whatmore-stories-css"});var v=function(e){const[t,r,s]=(0,n.A)(),[a]=(0,i.QN)("whatmoreStoryTileSize"),[c]=(0,i.QN)("whatmoreStoryTileSizeDesktop"),[f]=(0,i.QN)("whatmoreShopId"),[v,y]=(0,o.useState)("portrait"===t?"flex-start":"center"),[w,b]=(0,o.useState)(!1),[j,S]=(0,o.useState)(!1),C=(0,o.useRef)(null),k=(0,o.useRef)(null);var z=e.eventsStories;const E=e.onClick,F=e.template,A="landscape"===t&&(0,l.lDJ)(f);function I(){if(!A||!C.current)return;const{scrollLeft:e,scrollWidth:t,clientWidth:r}=C.current;b(e>0),S(e<t-r-1)}(0,o.useEffect)((()=>{p.Sn.forEach((e=>{var t;if(!(null!==(t=e.querySelector('.whatmore-template-type[data-wh="template-stories-a"]'))&&void 0!==t?t:e.querySelector('.whatmore-template-type[data="template-stories-a"]')))return;e&&(e.style.minHeight="0px")}))}),[]);const R=e=>{if(C.current){const t="left"===e?4*-M:4*M;C.current.scrollBy({left:t,behavior:"smooth"})}};(0,o.useEffect)((()=>{!function(){if(C.current){const e=C.current.scrollWidth,t=C.current.offsetWidth;y(e>t?"flex-start":"center")}}()}),[v,s]),(0,o.useEffect)((()=>{if(!A)return;const e=()=>{I()},t=()=>{I()},r=C.current;return r?(r.addEventListener("scroll",e),window.addEventListener("resize",t),I(),()=>{r.removeEventListener("scroll",e),window.removeEventListener("resize",t)}):void 0}),[A]);const[_,L]=(0,o.useState)([]);(0,o.useEffect)((()=>{L(z.map((e=>e.storyset_dynamic_thumbnail?Math.floor(Math.random()*(e.events.length-1)):0)))}),[]);const M="landscape"===t?r*(c/340):s*(a/200);return(0,d.jsx)(h.C,{value:g,children:"landscape"==t&&!(0,l.AFg)(f)||"portrait"==t&&!(0,l.rC6)(f)?(0,d.jsx)(d.Fragment,{}):(0,d.jsxs)("div",{ref:k,style:{position:"relative",width:"100%",height:"fit-content"},className:"whatmore-story-container",children:[(0,d.jsx)("div",{style:{display:"flex",flexFlow:"row nowrap",justifyContent:v,height:"fit-content",width:"100%",overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},className:"whatmore-story-horizontal-flex",ref:C,children:z.map(((e,t)=>{var r,o,n,i,l;const s=e.storyset_dynamic_thumbnail?null!==(r=null===(o=e.events[_[t]])||void 0===o?void 0:o.poster_image)&&void 0!==r?r:e.thumbnail_image:null!==(n=e.thumbnail_image)&&void 0!==n?n:null===e||void 0===e||null===(i=e.events)||void 0===i||null===(l=i[0])||void 0===l?void 0:l.thumbnail_image;return(0,d.jsx)(u,{storyId:e.id,tileSize:M,onClick:e=>{E(t)},template:F,imageUrl:s,fallbackUrl:e.thumbnail_image,title:e.title},"whatmore-story-"+e.id)}))}),A&&(0,d.jsxs)(d.Fragment,{children:[w&&(0,d.jsx)("button",{onClick:()=>R("left"),style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.7)",border:"none",position:"absolute",top:"40%",left:"16px",transform:"translateY(-50%)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease-in-out",backdropFilter:"blur(4px)",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},onMouseEnter:e=>{e.target.style.backgroundColor="rgba(0, 0, 0, 0.8)"},onMouseLeave:e=>{e.target.style.backgroundColor="rgba(0, 0, 0, 0.7)"},children:(0,d.jsx)(x,{style:{fontSize:"32px",display:"flex",alignItems:"center",justifyContent:"center"}})}),j&&(0,d.jsx)("button",{onClick:()=>R("right"),style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.7)",border:"none",position:"absolute",top:"40%",right:"16px",transform:"translateY(-50%)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease-in-out",backdropFilter:"blur(4px)",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},onMouseEnter:e=>{e.target.style.backgroundColor="rgba(0, 0, 0, 0.8)"},onMouseLeave:e=>{e.target.style.backgroundColor="rgba(0, 0, 0, 0.7)"},children:(0,d.jsx)(m,{style:{fontSize:"32px",display:"flex",alignItems:"center",justifyContent:"center"}})})]})]})})}},6125:function(){},6614:function(){},7973:function(e,t,r){r.d(t,{B:function(){return l},b:function(){return i}});var o=r(1348),n=r(5830);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=(0,n.Xd)("whatmoreShopId");return"shopify"!=(0,o.NCy)(r)?"STRNV8MHJTF"==r?e+"?format=webp":e:e+t}function l(e){var t;if(null!==e&&void 0!==e&&e.includes("https://w-media.b-cdn.net/process-media"))return"image";const r=null===e||void 0===e||null===(t=e.trim())||void 0===t?void 0:t.split("?")[0],o=/\.(jpeg|jpg|gif|png|svg|webp)$/i,n=/\.(mp4|mov|wmv|avi|flv|mkv)$/i;return null!==o&&void 0!==o&&o.test(r)?"image":null!==n&&void 0!==n&&n.test(r)?"video":void 0}}}]);