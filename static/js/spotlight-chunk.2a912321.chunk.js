"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[1260],{22209:function(e,t,n){n.r(t);var o=n(47313),s=n(49854),a=n(32860),i=n(99543),r=n(75160),c=n(26967),l=n(75380),h=n(60058),d=n(68984),u=n(24669),g=n(30941),m=n(86173),p=n(7381),v=n(16826),f=n(7300),w=n(86524),_=n(43388),j=n(17643),E=n(50778),S=n(46417);const I=(0,v.Z)({key:"whatmore-css-wsv"}),x=o.lazy((()=>Promise.all([n.e(2131),n.e(2739),n.e(8502),n.e(3583),n.e(2703),n.e(7450),n.e(6949),n.e(229),n.e(6981),n.e(8932),n.e(2374),n.e(839),n.e(6333),n.e(9755),n.e(9356),n.e(2013),n.e(8394),n.e(4901),n.e(133),n.e(1521),n.e(3669),n.e(9969),n.e(9484),n.e(7268),n.e(1142),n.e(6525),n.e(1856),n.e(7357),n.e(8604),n.e(6848),n.e(971),n.e(5356),n.e(4981),n.e(3853),n.e(5113),n.e(1537),n.e(7359),n.e(2688),n.e(79),n.e(670),n.e(9824),n.e(8013),n.e(8342),n.e(3046),n.e(1655),n.e(8817),n.e(3398),n.e(3596),n.e(1343),n.e(8080),n.e(352),n.e(4814),n.e(7187),n.e(1929),n.e(3930),n.e(1915),n.e(3615),n.e(1752),n.e(1983),n.e(824),n.e(9001),n.e(9164),n.e(1446),n.e(1478),n.e(731),n.e(4404),n.e(4958),n.e(5504),n.e(1942),n.e(6978),n.e(8012),n.e(245)]).then(n.bind(n,8933))));t.default=function(e){const[t,n]=(0,o.useState)(),[v,L]=(0,o.useState)(),[O]=(0,i.j1)("isInDesignMode"),[T]=(0,i.j1)("isDemoBrand"),[k,y]=(0,o.useState)(-2),[M]=(0,i.j1)("whatmoreShopId"),b=(0,i.MO)("isLandingSharedLink"),C=(0,i.MO)("whatmoreShareTemplateId"),D=((0,i.MO)("whatmoreShareStoryId"),(0,i.MO)("whatmoreShareEventId")),V=(0,i.MO)("whatmoreLandingLocationType"),P=(0,i.MO)("whatmoreLoggingActive");var B=(0,s.efR)(M)?a.Dm+"/get_eventset/":a.Gc+"/get_eventset/";(0,o.useEffect)((()=>{(0,c.hb)()}),[]),(0,o.useEffect)((()=>{(0,u.ll)(M)}),[]),(0,o.useEffect)((()=>{null==t||0==t.length||v||!(0,d.KE)()||(0,i.MO)("whatmoreVideoPlayerPoolInitiated")||(0,h.b5)(h.UD)}),[t]),(0,o.useEffect)((()=>{y(-1);const e=w.NX,t=(0,w.H1)(V),o=B.toString()+M.toString()+"?eventset_type="+e+"&source="+t+"&source_id="+M;fetch(o).then((e=>e.json())).then((t=>(0,_.OC)(t,e))).then((e=>(n(e),e))).catch((e=>{L(e.message)}))}),[]),(0,o.useEffect)((()=>{y(-2)}),[t]),(0,o.useEffect)((()=>{null==t||0==t.length||v||b&&"template-embed"==(0,w.zv)(C)&&null!=D&&t.forEach(((e,t)=>{D==e.event_id&&F(e,!0,t)}))}),[t]);const F=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((0,d.KE)()&&!t&&(0,h.QV)(),(0,f.B6)(e)||(0,f.WJ)(e))return O||T||(async()=>{(0,r.wh)(e),(0,u.Tc)(M,a.h7,a.dU),(0,c.H4)(e.event_id,e.products,"spotlight","video_popup")})(),void y(n)};function K(){return(0,S.jsx)(S.Fragment,{})}return null==t||0==t.length||v?(0,S.jsx)("div",{}):(P&&(0,p.EI)(t),(0,s.B$L)(M)&&k<0&&null!==localStorage.getItem("_whatmore_spotlight_viewed")?(0,S.jsx)(S.Fragment,{}):(localStorage.setItem("_whatmore_spotlight_viewed",!0),(0,S.jsx)(m.C,{value:I,children:-1===k||0===t.length?(0,S.jsx)(K,{}):-2===k&&t.length>0?(0,S.jsx)("div",{children:(0,S.jsx)(j.u,{userInteractionType:E.K.SPOTLIGHT_WIDGET_VIEW,event:t[0],productList:t[0].products,cta:t[0].cta,triggerFlag:!O&&!T,children:(0,S.jsx)(l.Z,{event:t[0],inVideoClick:F,closeClick:e=>{e.stopPropagation(),y(-1)},isSpotlight:!0})})}):(0,S.jsx)("div",{children:(0,S.jsx)(o.Suspense,{children:(0,S.jsx)(j.u,{userInteractionType:E.K.EVENT_VIEW,event:t[0],productList:t[0].products,cta:t[0].cta,triggerFlag:!O&&!T,children:(0,S.jsx)(x,{events:t,index:k,onBack:function(){(0,s.n2L)(M)&&(0,i.MO)("whatmoreAddedToCart")&&(0,g.D)(M,(()=>{}),100,window.location.hostname),y(-2)},template:"template-embed"})})})})})))}}}]);