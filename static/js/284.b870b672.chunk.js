"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[284],{4998:function(e,t,n){n.d(t,{D:function(){return o}});const o=async function(e,t,n,o){var c=await fetch("https://"+window.location.hostname+"/cart.js",{cache:"reload"}).then((e=>e.json()));if("27358003275"==e||"63748341981"==e||"68237558034"==e)document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{bubbles:!0,detail:{cart:c,openMiniCart:!0}}));else if("19506115"==e)window.PXUTheme.jsAjaxCart.showDrawer(),window.PXUTheme.jsAjaxCart.updateView();else if("54465429691"==e)refreshCart(c),window.setTimeout((function(){$.fancybox.close(),$(".cart-button").click()}),500);else if("25427564"==e){(new theme.CartDrawer).open()}else"62602182872"==e||"57362710572"==e?(CartJS.getCart(),$(".block-cart").addClass("active")):"60492578980"==e?(document.documentElement.dispatchEvent(new CustomEvent("ajaxProduct:added",{bubbles:!0,detail:{}})),document.documentElement.dispatchEvent(new CustomEvent("cart:open",{bubbles:!0,detail:{}}))):document.documentElement.dispatchEvent(new CustomEvent("product:added",{bubbles:!0,detail:{}}));setTimeout(t,n)}},4284:function(e,t,n){n.r(t);var o=n(7313),c=n(9854),i=n(2860),r=n(9543),a=n(5160),d=(n(4844),n(6967)),s=n(58),u=n(8984),p=(n(7247),n(1824),n(4669)),l=n(4998),h=n(6417);const v=o.lazy((()=>Promise.all([n.e(302),n.e(13),n.e(648),n.e(240),n.e(1),n.e(853),n.e(183),n.e(546),n.e(834),n.e(134)]).then(n.bind(n,7093)))),f=o.lazy((()=>Promise.all([n.e(302),n.e(13),n.e(367),n.e(240),n.e(423),n.e(380)]).then(n.bind(n,5380))));function g(e){return e.split(/[?#]/)[0]}t.default=function(e){const[t,n]=(0,o.useState)(),[w,m]=(0,o.useState)(),[b]=(0,r.j1)("isInDesignMode"),[y]=(0,r.j1)("isDemoBrand"),[_]=(0,r.j1)("whatmoreEmbedAppUseVariant"),[j,T]=(0,o.useState)(0),[E]=(0,r.j1)("whatmoreVariantId"),[S]=(0,r.j1)("whatmoreShopId");var[C]=(0,r.j1)("whatmoreProductId");C=(0,c.iX)(S)?g(window.location.href):C;const[P,k]=(0,o.useState)((()=>"true"===_?E:C));var I=i.Gc+"/v1/brand/"+S+"/product-events";if((0,o.useEffect)((()=>{(0,d.hb)()}),[]),(0,o.useEffect)((()=>{(0,p.ll)(S)}),[]),(0,o.useEffect)((()=>{null==t||0==t.length||w||!(0,u.KE)()||(0,r.MO)("whatmoreVideoPlayerPoolInitiated")||(0,s.b5)(s.UD)}),[t]),(0,o.useEffect)((()=>{T(-1),fetch(I.toString()+"?client_product_id="+P.toString()+"&status="+"upcoming".toString()+"&event_type=video").then((e=>e.json())).then((e=>(n(e),e))).then((e=>((0,c.yo)(S)&&function(e,t){setTimeout((async()=>{const n=e.reduce(((e,t)=>[...e,...t.products]),[]).filter((e=>e.client_product_id==t))[0];if(!n||n.product_link==g(window.location.href))return;const o={product_id:n.product_id,product_link:g(window.location.href)};fetch(i.Gc+"/product",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)})}),500)}(e,P),e))).catch((e=>{m(e.message)}))}),[P]),(0,o.useEffect)((()=>{T(0)}),[t]),(0,o.useEffect)((()=>{let e=history.pushState;history.pushState=function(){let t=e.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),t};let t=history.replaceState;history.replaceState=function(){let e=t.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),e},window.addEventListener("popstate",(()=>{window.dispatchEvent(new Event("locationchange"))})),window.addEventListener("locationchange",(function(){"true"===_&&k(function(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var o=t[n].split("=");if(o[0]==e)return o[1]}return!1}("variant"))}))}),[]),null==t||0==t.length||w)return(0,h.jsx)("div",{});function x(){return(0,h.jsx)(h.Fragment,{})}return(0,h.jsx)(h.Fragment,{children:"no-product"===P||-1===j||0===t.length?(0,h.jsx)(x,{}):0===j&&t.length>0?(0,h.jsx)("div",{children:(0,h.jsx)(o.Suspense,{children:(0,h.jsx)(f,{event:t[0],inVideoClick:e=>{if((0,u.KE)()&&(0,s.QV)(),"video"===e.event_type)return b||y||(async()=>{(0,a.wh)(e),(0,p.Tc)(S,i.h7,i.dU),(0,d.H4)(e.event_id,e.products,"product_page","video_popup")})(),void T(1)},closeClick:e=>{e.stopPropagation(),T(-1)}})})}):(0,h.jsx)("div",{style:{WebkitFilter:"blur(5px) grayscale(90%)"},children:(0,h.jsx)(o.Suspense,{children:(0,h.jsx)(v,{events:t,index:0,onBack:function(){(0,c.n2)(S)&&(0,r.MO)("whatmoreAddedToCart")&&(0,l.D)(S,(()=>{}),100,window.location.hostname),T(0)},template:"template-product-page"})})})})}},5160:function(e,t,n){n.d(t,{$L:function(){return a},JX:function(){return r},rp:function(){return d},wh:function(){return c},wz:function(){return i}});var o=n(2860);n(9543);function c(e){console.debug("updating user view count for event.");const t={event_id:e.event_id,increase_by:1};fetch(o.Gc+"/event/metrics/views",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>(console.debug("updating user view count response : HTTP "+e.status),e.json()))).then((e=>{console.debug("updating user view count response : "+JSON.stringify(e))})).catch((e=>{console.error("error updating user view count user for event : ",e)}))}function i(e,t){console.debug("updating event-product click count for event {} and product {}.",e.event_id,t.product_id);const n={event_id:e.event_id,product_id:t.product_id,increase_by:1};fetch(o.Gc+"/event/metrics/clicks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>(console.debug("updating user event-product click count response : HTTP "+e.status),e.json()))).then((e=>{console.debug("updating user event-product click count response : "+JSON.stringify(e))})).catch((t=>{console.error("error updating user event-product click count for event {} : ",e.event_id,t)}))}function r(e,t,n){console.debug("updating event-product add to cart count for event {} and product {}.",e.event_id,t.product_id);const c={event_id:e.event_id,product_id:t.product_id,increase_by:n};fetch(o.Gc+"/event/metrics/add_to_cart",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)}).then((e=>(console.debug("updating user event-product add to cart count response : HTTP "+e.status),e.json()))).then((e=>{console.debug("updating user event-product add to cart count response : "+JSON.stringify(e))})).catch((t=>{console.error("error updating user event-product add to cart count for event {} : ",e.event_id,t)}))}function a(e,t){console.debug("updating event-product buy now count for event {} and product {}.",e.event_id,t.product_id);const n={event_id:e.event_id,product_id:t.product_id,increase_by:1};fetch(o.Gc+"/event/metrics/buy_now",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>(console.debug("updating user event-product buy now count response : HTTP "+e.status),e.json()))).then((e=>{console.debug("updating user event-product buy now count response : "+JSON.stringify(e))})).catch((t=>{console.error("error updating user event-product buy now count for event {} : ",e.event_id,t)}))}async function d(){let{storeId:e="",eventId:t=0,productId:n="",variantId:c="",cartToken:i="",checkoutToken:r="",quantity:a=0,price:d="",actionType:s="",trackingId:u=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p={event_id:t,product_id:n,cart_token:i,checkout_token:r,quantity:a,price:d,variant_id:c,action_type:s,tracking_id:u};console.debug("initiating ATC metadata event for eventId {}, productId {}, variantId {} ",t,n,c);const l=await fetch(o.Gc+"/cart-metadata/"+e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(p)}).then((e=>(console.debug("initiating ATC metadata event for eventId {}, productId {}, variantId {} : HTTP "+e.status),e.json()))).catch((e=>{console.error("error initiating ATC metadata event for eventId {}, productId {}, variantId {} : ",t,n,c)}));return l}},4669:function(e,t,n){n.d(t,{Tc:function(){return u},ll:function(){return s}});var o=n(1824),c=n(9854);n(9543);const i="Whatmore Video Shopping",r="Video View",a={carousel:"Carousel",stories:"Stories",video_popup:"Video Popup"},d={homepage:"Home Page",product_page:"Product Page"};async function s(e){null!==(0,c.BH)(e)&&o.ZP.initialize((0,c.BH)(e),{useExistingGa:!0})}async function u(e,t,n){null!==(0,c.BH)(e)&&(o.ZP.event({category:i,action:r,label:d[t]+":"+a[n]}),console.debug("pushed view event to GA"))}}}]);