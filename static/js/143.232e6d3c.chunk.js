"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[143],{8181:function(t,e,n){var i=n(7313),o=n(8866),r=n(7753),a=n(6417);const s=i.memo((()=>{if(!(0,r.MO)("isLandingSharedLink"))return(0,a.jsx)(a.Fragment,{});const[t]=(0,o.Z)();return(0,a.jsxs)("div",{className:`shimmer-container ${t}`,children:["portrait"===t?(0,a.jsx)("div",{className:"shimmer-item portrait-full",children:(0,a.jsx)("div",{className:"shimmer-effect"})}):Array(3).fill().map(((t,e)=>(0,a.jsx)("div",{className:"shimmer-item landscape-item "+(1===e?"center-item":""),children:(0,a.jsx)("div",{className:"shimmer-effect"})},e))),(0,a.jsx)("style",{children:"\n                    .shimmer-container {\n                        display: flex;\n                        position: fixed;\n                        top: 0;\n                        left: 0;\n                        width: 100vw;\n                        height: 100vh;\n                        overflow-x: scroll;\n                        scroll-snap-type: x mandatory;\n                        scroll-behavior: smooth;\n                        z-index: 1000;\n                    }\n\n                    .portrait {\n                        justify-content: center;\n                        align-items: center;\n                        background: rgba(0, 0, 0, 0.3);\n                    }\n\n                    .landscape {\n                        justify-content: center;\n                        align-items: center;\n                        background: rgba(0, 0, 0, 0.8);\n                    }\n\n                    .shimmer-item {\n                        scroll-snap-align: start;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;\n                        position: relative;\n                        transition: transform 0.3s ease;\n                    }\n\n                    .portrait-full {\n                        width: 100vw;\n                        height: 100vh;\n                        margin: 0; \n                    }\n\n                    .landscape-item {\n                        width: 250px;\n                        height: 450px;\n                        background: #D3D3D3;\n                        border-radius: 8px;\n                        margin-left: -50px; \n                    }\n\n                    .center-item {\n                        width: 360px;\n                        height: 620px;\n                        box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.5); \n                        z-index: 10; \n                    }\n\n                    .shimmer-effect {\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                        width: 100%;\n                        height: 100%;\n                        background: linear-gradient(90deg, rgba(0, 0, 0, 0.3) 25%, rgba(0, 0, 0, 0.5) 50%, rgba(0, 0, 0, 0.3) 75%);\n                        animation: shimmer 2s infinite;\n                        background-size: 200% 100%;\n                    }\n\n                    @keyframes shimmer {\n                        0% {\n                            background-position: -200% 0;\n                        }\n                        100% {\n                            background-position: 200% 0;\n                        }\n                    }\n                "})]})}));e.Z=s},4284:function(t,e,n){n.r(e);var i=n(7313),o=n(9854),r=n(2860),a=n(7753),s=n(5160),c=n(6967),d=n(5380),l=n(58),u=n(8984),p=n(4669),h=n(513),v=n(9302),m=n(2575),f=n(7300),g=n(6524),w=n(8811),_=n(4522),E=n(778),I=n(7643),y=n(7008),x=n(7381),L=n(8181),S=n(6417);const D=(0,m.Z)({key:"whatmore-css-ppv"}),T=i.lazy((()=>Promise.all([n.e(819),n.e(577),n.e(351),n.e(955),n.e(926),n.e(303),n.e(218),n.e(903)]).then(n.bind(n,3218))));function b(t){return t.split(/[?#]/)[0]}e.default=function(t){const[e,n]=(0,i.useState)(),[m,j]=(0,i.useState)(),[C]=(0,a.j1)("isInDesignMode"),[k]=(0,a.j1)("isDemoBrand"),[K]=(0,a.j1)("whatmoreEmbedAppUseVariant"),[O,P]=(0,i.useState)(-2),[V]=(0,a.j1)("whatmoreVariantId"),[M]=(0,a.j1)("whatmoreShopId");var[A]=(0,a.j1)("whatmoreProductId");const N=(0,a.MO)("isLandingSharedLink"),[W,U]=(0,i.useState)(N),B=(0,a.MO)("whatmoreShareTemplateId"),z=(0,a.MO)("whatmoreShareEventId");A=(0,o.iXA)(M)?b(window.location.href):A;const[H,Z]=(0,i.useState)((()=>"true"===K?V:A));var F=r.Gc+"/v2/brand/"+M+"/product-events";const{whatmoreWidgetSourceDetails:G}=(0,i.useContext)(w.I);(0,i.useEffect)((()=>{(0,x.Oo)("Video shopping powered by Whatmore!"),(0,c.hb)();const t=()=>{const t="_whatmore_bulk_events",e=JSON.parse(localStorage.getItem(t))||[];e&&e.length>0&&((0,y.K)(e),localStorage.removeItem(t))};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}),[]),(0,i.useEffect)((()=>{(0,p.ll)(M)}),[]),(0,i.useEffect)((()=>{null==e||0==e.length||m||!(0,u.KE)()||(0,a.MO)("whatmoreVideoPlayerPoolInitiated")||(0,l.b5)(l.UD)}),[e]),(0,i.useEffect)((()=>{P(-1),fetch(F.toString()+"?client_product_id="+H.toString()+"&status="+"upcoming".toString()+"&event_type=video").then((t=>t.json())).then((t=>t.events)).then((t=>(null!=t&&0!=t.length&&(0,o.Htz)(M)&&(0,o.d0x)(t),n(t),t))).then((t=>((0,o.yoE)(M)&&function(t,e){setTimeout((async()=>{const n=t.reduce(((t,e)=>[...t,...e.products]),[]).filter((t=>t.client_product_id==e))[0];if(!n||n.product_link==b(window.location.href))return;const i={product_id:n.product_id,product_link:b(window.location.href)};fetch(r.Gc+"/product",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)})}),500)}(t,H),t))).catch((t=>{j(t.message)}))}),[H]),(0,i.useEffect)((()=>{var t,n;P(-2),(e&&e.length>0||(0,o.uO6)(M))&&(0,_.PB)({userInteractionType:E.K.PDP_VISITED,widgetSourceDetails:G,event:null===e||void 0===e?void 0:e[0],productList:null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.products,ctaList:null===e||void 0===e||null===(n=e[0])||void 0===n?void 0:n.cta})}),[e]),(0,i.useEffect)((()=>{let t=history.pushState;history.pushState=function(){let e=t.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),e};let e=history.replaceState;history.replaceState=function(){let t=e.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),t},window.addEventListener("popstate",(()=>{window.dispatchEvent(new Event("locationchange"))})),window.addEventListener("locationchange",(function(){if("true"===K){const t=function(t){for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var i=e[n].split("=");if(i[0]==t)return i[1]}return!1}("variant");t&&""!==t&&Z(t)}}))}),[]),(0,i.useEffect)((()=>{if(null!=e&&0!==e.length&&!m&&N&&"template-embed"===(0,g.zv)(B)&&null!=z){const t=e.find((t=>z==t.event_id));if(t)return q(t,!0,e.indexOf(t)),void U(!1)}U(!1)}),[e]);const R=G.landingLocationType,J=G.templateType,q=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((0,u.KE)()&&!e&&(0,l.QV)(),(0,f.B6)(t)||(0,f.WJ)(t))return C||k||(async()=>{const e=(0,g.NY)(R)+(0,g.dS)(J)+"_"+(null===t||void 0===t?void 0:t.event_id);(0,s.wh)(t),(0,p.Tc)(M,r.h7,r.dU),(0,c.H4)(t.event_id,t.products,"product_page","video_popup",e)})(),void P(n)};function Y(){return(0,S.jsx)(S.Fragment,{})}return null==e||0==e.length||m?(0,S.jsx)("div",{}):(0,S.jsx)(v.C,{value:D,children:W?(0,S.jsx)(L.Z,{}):"no-product"===H||-1===O||0===e.length?(0,S.jsx)(Y,{}):-2===O&&e.length>0?(0,S.jsx)("div",{children:(0,S.jsx)(I.u,{userInteractionType:E.K.PDP_POPUP_WIDGET_VIEW,event:e[0],productList:e[0].products,cta:e[0].cta,triggerFlag:!C&&!k,children:(0,S.jsx)(d.Z,{event:e[0],inVideoClick:q,closeClick:t=>{t.stopPropagation(),P(-1)}})})}):(0,S.jsx)("div",{children:(0,S.jsx)(i.Suspense,{children:(0,S.jsx)(I.u,{userInteractionType:E.K.EVENT_VIEW,event:e[0],productList:e[0].products,cta:e[0].cta,triggerFlag:!C&&!k,children:(0,S.jsx)(T,{events:e,index:O,onBack:function(t){(0,o.n2L)(M)&&(0,a.MO)("whatmoreAddedToCart")&&(0,h.D)(M,(()=>{}),100,window.location.hostname,t),P(-2),U(!1)},template:"template-product-page"})})})})})}},4522:function(t,e,n){n.d(e,{gW:function(){return s},GF:function(){return c},y4:function(){return l},PB:function(){return u},Z2:function(){return d}});var i=n(9854),o=n(7753),r=n(778);var a=n(733);const s={[r.K.EVENT_VIEW]:"whatmore_video_click_event",[r.K.VIDEO_LIKED]:"whatmore_video_like_event",[r.K.VIDEO_SHARE_CTA_CLICKED]:"whatmore_video_share_event",[r.K.PRODUCT_TILE_ATC_CLICKED]:"whatmore_video_atc_event",[r.K.SHOPNOW_ATC_CLICKED]:"whatmore_video_atc_event"};function c(t){var e;let{userInteractionType:n,userInteractionMetadata:c,widgetSourceDetails:d,event:l,productList:u,ctaList:p}=t;(0,a.s)({userInteractionType:n,userInteractionMetadata:c,widgetSourceDetails:d,event:l,productList:u,ctaList:p}),n in s&&function(t,e){const n=(0,o.MO)("whatmoreShopId");(t!=r.K.EVENT_VIEW||(0,i.UAB)(n))&&(t!=r.K.SHOPNOW_ATC_CLICKED&&t!=r.K.PRODUCT_TILE_ATC_CLICKED||(0,i.Tn_)(n))&&(t!=r.K.VIDEO_LIKED||(0,i.sKB)(n))&&(t!=r.K.VIDEO_SHARE_CTA_CLICKED||(0,i.YOU)(n))&&"function"==typeof fbq&&(async()=>{console.log("hello"),fbq("trackCustom",s[t],{id:null===e||void 0===e?void 0:e.client_product_id,product_url:null===e||void 0===e?void 0:e.product_link})})()}(n,null!==(e=null===u||void 0===u?void 0:u[1])&&void 0!==e?e:null===u||void 0===u?void 0:u[0])}function d(t){let{userInteractionType:e,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s}=t;(0,a.s)({userInteractionType:e,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s})}function l(t){let{userInteractionType:e,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s}=t;(0,a.s)({userInteractionType:e,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s})}function u(t){let{userInteractionType:e,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s}=t;(0,a.s)({userInteractionType:e,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s})}}}]);