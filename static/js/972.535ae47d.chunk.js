"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[972],{3972:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var a=n(7753),r=n(7313),i=n(2860),o=n(499),s=n(4897),l=n(5160),c=n(9854),u=n(6967),d=n(8984),h=n(58),p=n(4669),m=n(941),v=n(9039),g=n(7300),S=n(6524),I=n(7643),f=n(778),y=n(6417);const w=r.lazy((()=>Promise.all([n.e(302),n.e(819),n.e(13),n.e(240),n.e(367),n.e(210),n.e(926),n.e(950),n.e(303),n.e(891)]).then(n.bind(n,4095)))),E=r.lazy((()=>Promise.all([n.e(302),n.e(819),n.e(13),n.e(240),n.e(367),n.e(576),n.e(950),n.e(364),n.e(530)]).then(n.bind(n,5523)))),x=r.lazy((()=>Promise.all([n.e(302),n.e(819),n.e(13),n.e(240),n.e(367),n.e(423),n.e(926),n.e(950),n.e(249),n.e(622)]).then(n.bind(n,3827)))),T=r.lazy((()=>Promise.all([n.e(302),n.e(819),n.e(13),n.e(240),n.e(367),n.e(423),n.e(926),n.e(950),n.e(249),n.e(965)]).then(n.bind(n,6071)))),_=r.lazy((()=>Promise.all([n.e(302),n.e(819),n.e(13),n.e(240),n.e(367),n.e(423),n.e(926),n.e(950),n.e(708)]).then(n.bind(n,1291)))),j=r.lazy((()=>Promise.all([n.e(302),n.e(580)]).then(n.bind(n,3580)))),M=r.lazy((()=>Promise.all([n.e(302),n.e(819),n.e(13),n.e(240),n.e(576),n.e(210),n.e(955),n.e(926),n.e(303),n.e(209),n.e(790)]).then(n.bind(n,4209)))),O=r.lazy((()=>Promise.all([n.e(302),n.e(819),n.e(13),n.e(240),n.e(367),n.e(210),n.e(926),n.e(950),n.e(959)]).then(n.bind(n,4048)))),L=r.lazy((()=>Promise.all([n.e(302),n.e(819),n.e(13),n.e(367),n.e(926),n.e(950),n.e(303),n.e(554)]).then(n.bind(n,9085)))),C=r.lazy((()=>Promise.all([n.e(302),n.e(819),n.e(13),n.e(240),n.e(367),n.e(576),n.e(950),n.e(303),n.e(364),n.e(67)]).then(n.bind(n,4362)))),b=r.lazy((()=>Promise.all([n.e(302),n.e(819),n.e(13),n.e(240),n.e(576),n.e(210),n.e(955),n.e(926),n.e(303),n.e(209),n.e(196)]).then(n.bind(n,4658)))),D=r.lazy((()=>Promise.all([n.e(302),n.e(819),n.e(13),n.e(240),n.e(367),n.e(423),n.e(926),n.e(950),n.e(84)]).then(n.bind(n,8767))));var P=function(e){const[t]=(0,a.j1)("isInDesignMode"),[n]=(0,a.j1)("isDemoBrand"),[P]=(0,a.j1)("whatmoreTopBottomPadding"),[G]=(0,a.j1)("whatmoreStoriesTopBottomPadding"),{whatmoreIsStoriesTemplate:W}=(0,r.useContext)(v.I),[V]=(0,a.j1)("whatmoreShopId"),{whatmoreEventsBrowsingTemplate:k}=(0,r.useContext)(v.I),q=(0,a.MO)("isLandingSharedLink"),z=(0,a.MO)("whatmoreShareTemplateId"),R=(0,a.MO)("whatmoreShareStoryId"),U=(0,a.MO)("whatmoreShareEventId"),[A,N]=(0,r.useState)(-1),[Z,F]=(0,r.useState)(null);let K=e.events,B=[];if("template-banner-a"!==k){let e=0;for(let t=0;t<(null===K||void 0===K?void 0:K.length);t++){var H,Y,J,X;const n=(null===K||void 0===K||null===(H=K[t])||void 0===H||null===(Y=H.products)||void 0===Y?void 0:Y.length)>0&&(null===K||void 0===K||null===(J=K[t])||void 0===J||null===(X=J.products)||void 0===X?void 0:X.every((e=>"oos"===(null===e||void 0===e?void 0:e.product_status))));if(!(0,g.B6)(K[t])&&!(0,g.WJ)(K[t])||n){if((0,g.yC)(null===K||void 0===K?void 0:K[t])){var{status:Q,bannerText:$,timeToStartInMins:ee}=s.Z.getEventStatus(K[t]);Q.name===o.Z.LIVE.name&&(B.push({...null===K||void 0===K?void 0:K[t],index:e}),e++)}}else B.push({...null===K||void 0===K?void 0:K[t],index:e}),e++}}var te=null;function ne(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,d.KE)()&&!a&&(0,h.QV)(),t||n||(async()=>{const t=te[e].events[0];(0,l.wh)(t),(0,p.Tc)(V,i.Xh,i.OW),(0,u.H4)(t.event_id,t.products,"homepage","stories")})();var o=0;null!=r&&te[e].events.map(((e,t)=>{e.event_id==r&&(o=t)})),N(o),F(e)}function ae(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,d.KE)()&&!a&&(0,h.QV)(),(0,g.B6)(e)||(0,g.WJ)(e))return t||n||(async()=>{(0,l.wh)(e),(0,p.Tc)(V,i.Xh,i.pR),(0,u.H4)(e.event_id,e.products,"homepage","carousel")})(),void N(e.index);const r=20;var{status:c,bannerText:m,timeToStartInMins:v}=s.Z.getEventStatus(e);v<=r&&c.name!==o.Z.LIVE.name?console.debug(" TODO : show toast on upcoming live event."):N(e.index)}function re(e){return(0,y.jsx)(y.Fragment,{})}return W&&!te&&(te=function(e){var t=e.reduce(((e,t,n)=>{var a=t.storyset_id;return a in e?(e[a].total_events=e[a].total_events+1,e[a].events.push(t)):e[a]={id:t.storyset_id,title:t.storyset_name,thumbnail_image:t.storyset_thumbnail_image,total_events:1,start_event_index:n,events:[t]},e}),{}),n=Object.values(t);return n.sort(((e,t)=>e.start_event_index-t.start_event_index)),n}(B)),(0,r.useEffect)((()=>{q&&k==(0,S.zv)(z)&&(null!=R&&W?te.forEach(((e,t)=>{R==e.id&&ne(t,!0,U)})):null!=U&&K.forEach(((e,t)=>{U==e.event_id&&ae(e,!0)})))}),[]),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{style:{marginTop:(W?G:P)+"px",marginBottom:(W?G:P)+"px"},children:"template-b"===k?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(w,{events:B,onClick:ae,heading:e.heading})}):"template-a-1"===k?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(E,{events:B,onClick:ae,heading:e.heading})}):"template-feed-a"===k?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(C,{events:B,onClick:ae,heading:e.heading})}):"template-collections-a"===k||"template-c"===k?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(I.u,{userInteractionType:f.K.COLLECTION_WIDGET_VIEW,triggerFlag:!t&&!n,children:(0,y.jsx)(x,{events:B,index:A,setScreen:N,onClick:ae,heading:e.heading})})}):"template-collections-b"===k||"template-d"===k?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(I.u,{userInteractionType:f.K.COLLECTION_WIDGET_VIEW,triggerFlag:!t&&!n,children:(0,y.jsx)(T,{events:B,index:A,setScreen:N,onClick:ae,heading:e.heading})})}):"template-collections-c"===k||"template-e"===k?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(I.u,{userInteractionType:f.K.COLLECTION_WIDGET_VIEW,triggerFlag:!t&&!n,children:(0,y.jsx)(_,{events:B,index:A,setScreen:N,onClick:ae,heading:e.heading})})}):"template-collections-d"===k?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(I.u,{userInteractionType:f.K.HOMEPAGE_CAROUSEL_WIDGET_VIEW,triggerFlag:!t&&!n,children:(0,y.jsx)(w,{events:B,index:A,setScreen:N,onClick:ae,heading:e.heading})})}):"template-collections-e"===k?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(I.u,{userInteractionType:f.K.HOMEPAGE_CAROUSEL_WIDGET_VIEW,triggerFlag:!t&&!n,children:(0,y.jsx)(O,{events:B,index:A,setScreen:N,onClick:ae,heading:e.heading})})}):"template-collections-stories"===k?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(I.u,{userInteractionType:f.K.HOMEPAGE_CAROUSEL_WIDGET_VIEW,triggerFlag:!t&&!n,children:(0,y.jsx)(D,{events:B,index:A,setScreen:N,onClick:ae,heading:e.heading})})}):"template-f"===k?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(I.u,{userInteractionType:f.K.HOMEPAGE_CAROUSEL_WIDGET_VIEW,triggerFlag:!t&&!n,children:(0,y.jsx)(L,{events:B,onClick:ae,heading:e.heading})})}):"template-banner-a"===k?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(I.u,{userInteractionType:f.K.BANNER_WIDGET_VIEW,event:K[0],triggerFlag:!t&&!n,children:(0,y.jsx)(b,{events:K})})}):W?(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(I.u,{userInteractionType:f.K.STORIES_WIDGET_VIEW,triggerFlag:!t&&!n,children:(0,y.jsx)(j,{eventsStories:te,onClick:ne,template:k})})}):(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(I.u,{userInteractionType:f.K.HOMEPAGE_CAROUSEL_WIDGET_VIEW,triggerFlag:!t&&!n,children:(0,y.jsx)(O,{events:B,onClick:ae,heading:e.heading})})})}),-1==A||-2==A?(0,y.jsx)(re,{}):(0,y.jsx)(r.Suspense,{children:(0,y.jsx)(I.u,{userInteractionType:f.K.EVENT_VIEW,event:K[A],productList:K[A].products,cta:K[A].cta,triggerFlag:!t&&!n,children:(0,y.jsx)(M,{events:B,index:A,onBack:function(e){(0,c.n2L)(V)&&(0,a.MO)("whatmoreAddedToCart")&&(0,m.D)(V,(()=>{}),100,window.location.hostname),N(-1)},slideDirection:W||"horizontal"===(0,c.e8z)(V)?"horizontal":"vertical",eventsStories:te,initialStoryIndex:Z,template:k})})})]})};const G=function(e,t,n){const r=(0,a.MO)("whatmoreShopId");var i=t.reduce(((e,t,n)=>(t.products.map((e=>e.client_product_id)).forEach((t=>{t in e||(e[t]=!0)})),e)),{}),o=Object.keys(i);if("60960964855"==r&&"undefined"!=typeof fera&&"function"===typeof fera.getRatings){var s={};fera.getRatings(o,(e=>{new Promise(((t,n)=>{e.forEach((e=>{s[e.external_product_id]={avgRating:e.average,totalRatings:e.count}})),t(s)})).then((e=>n(e)))}))}if("23114481744"==r){const e="1e6MQXxzYR19mpw9Km6Dcm86";s={};fetch("https://api.juniphq.com/v1/products?filter[remote_ids]="+o.toString(),{headers:{"Junip-Store-Key":e}}).then((e=>e.json())).then((e=>(e.products.forEach((e=>{s[e.remote_id]={avgRating:parseFloat(e.rating_average).toFixed(1),totalRatings:e.rating_count}})),s))).then((e=>n(e))).catch((e=>console.error(e)))}};var W=n(3388),V=n(7381),k=n(7376),q=n(7008);var z=function(e){const[t,n]=(0,r.useState)(),[o,s]=(0,r.useState)(),{whatmoreIsStoriesTemplate:l}=(0,r.useContext)(v.I),{whatmoreIsCollectionsTemplate:p}=(0,r.useContext)(v.I),{whatmoreIsBannerTemplate:m}=(0,r.useContext)(v.I),[g]=(0,a.j1)("whatmoreShopId"),[I]=(0,a.j1)("whatmoreCollectionId"),w=(0,a.MO)("whatmoreLandingLocationType"),E=(0,a.MO)("whatmoreLoggingActive"),{whatmoreWidgetSourceDetails:x}=(0,r.useContext)(v.I),{whatmoreCollectionUrl:T}=(0,r.useContext)(v.I),_=(0,c.cZT)(g)?(0,c._uv)(g)?T:window.location.href.split(/[?#]/)[0]:I,[j,M]=(0,a.j1)("productRatings"),[O,L]=(0,r.useState)(!1);var C=(0,c.efR)(g)?i.Dm+"/v2/events/":i.Gc+"/v2/events/",b=(0,c.efR)(g)?i.Dm+"/get_eventset/":i.Gc+"/get_eventset/",D=(0,c.efR)(g)?i.Dm+"/v2/collection":i.Gc+"/v2/collection",z=(0,c.efR)(g)?i.Dm+"/v2/brand/"+g+"/product-events":i.Gc+"/v2/brand/"+g+"/product-events",R=e.shopId,U="live,upcoming";return(0,r.useEffect)((()=>{(0,u.hb)();const e=()=>{const e="_whatmore_bulk_events",t=JSON.parse(localStorage.getItem(e))||[];t&&t.length>0&&((0,q.K)(t),localStorage.removeItem(e))};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[]),(0,r.useEffect)((()=>{null==t||0==t.length||o||!(0,d.KE)()||(0,a.MO)("whatmoreVideoPlayerPoolInitiated")||(0,h.b5)(h.UD)}),[t]),(0,r.useEffect)((()=>{var e;if(w.startsWith("product")){var t=(0,a.MO)("whatmoreProductId");t=(0,c.iXA)(g)?function(e){return e.split(/[?#]/)[0]}(window.location.href):t,e=z.toString()+"?client_product_id="+t.toString()+"&status="+U.toString()+"&event_type=video"}else if(p||"invalid-url"!==T)e=D.toString()+"?store_id="+R.toString()+"&client_collection_id="+_;else if(m){const t=S.ls,n=(0,S.H1)(w);e=b.toString()+R.toString()+"?eventset_type="+t+"&source="+n+"&source_id="+g}else e=C.toString()+R.toString()+"?status="+U.toString()+"&is_active="+"true".toString()+(l?"&template_type=stories":"");fetch(e).then((e=>e.json())).then((e=>{if(m){const t=S.ls;return(0,W.OC)(e,t)}return(0,W.kW)(e,p||"invalid-url"!==T)})).then((e=>(E&&console.debug("initial received events size : "+e.length),l||m?e:(0,W.e8)(e,R)))).then((e=>(null!=e&&0!=e.length&&(0,c.LUY)(g)&&function(e,t,n){const r=setInterval((()=>{null===(0,a.MO)("productRatings")&&G(e,t,n)}),1e3);setTimeout((()=>{clearInterval(r)}),1e4)}(g,e,(e=>{M(e)})),e))).then((e=>{null==e||0==e.length||l||m||(0,c.NOv)(R,e),n(e),L(!0)})).catch((e=>{s(e.message)}))}),[]),(0,r.useEffect)((()=>{"index"===w?t&&t.length>0&&(0,k.PB)({userInteractionType:f.K.HOMEPAGE_VISITED,widgetSourceDetails:x}):"collection"===w&&(t&&t.length>0||(0,c.miB)(g))&&(0,k.PB)({userInteractionType:f.K.COLLECTION_PAGE_VISITED,widgetSourceDetails:x})}),[t]),(O&&(null==t||0==t.length)||o)&&v.$.forEach((e=>{var t,n,a,r;const i=null!==(t=e.querySelector('.whatmore-template-type[data-wh="template-stories-a"]'))&&void 0!==t?t:e.querySelector('.whatmore-template-type[data="template-stories-a"]'),o=null!==(n=e.querySelector('.whatmore-template-type[data-wh="template-a"]')||e.querySelector('.whatmore-template-type[data-wh="template-b"]')||e.querySelector('.whatmore-template-type[data-wh="template-f"]')||e.querySelector('.whatmore-template-type[data-wh="template-e"]'))&&void 0!==n?n:e.querySelector('.whatmore-template-type[data="template-a"]')||e.querySelector('.whatmore-template-type[data="template-b"]')||e.querySelector('.whatmore-template-type[data="template-f"]')||e.querySelector('.whatmore-template-type[data="template-e"]'),s=null!==(a=e.querySelector('.whatmore-template-type[data-wh="template-collections-a"]')||e.querySelector('.whatmore-template-type[data-wh="template-collections-b"]')||e.querySelector('.whatmore-template-type[data-wh="template-collections-c"]')||e.querySelector('.whatmore-template-type[data-wh="template-collections-stories"]'))&&void 0!==a?a:e.querySelector('.whatmore-template-type[data="template-collections-a"]')||e.querySelector('.whatmore-template-type[data="template-collections-b"]')||e.querySelector('.whatmore-template-type[data="template-collections-c"]')||e.querySelector('.whatmore-template-type[data="template-collections-stories"]'),l=null!==(r=e.querySelector('.whatmore-template-type[data-wh="template-banner-a"]'))&&void 0!==r?r:e.querySelector('.whatmore-template-type[data="template-banner-a"]'),c=e;(l||s||o||i)&&(o&&c||i&&c||l&&c||s&&c)&&(c.style.minHeight="0px")})),null==t||0==t.length||o?(0,y.jsx)("div",{}):(E&&(0,V.EI)(t),function(e){if(null!=e){var t=0;e.forEach((e=>{e.index=t++}))}}(t),E&&console.debug("final transformed events data : "+JSON.stringify(t)),E&&console.debug("valid events size : "+t.length),(0,y.jsx)(P,{heading:e.heading,events:t}))},R=n(3933);var U=function(e){const[t]=(0,a.j1)("isInDesignMode"),[n]=(0,a.j1)("isDemoBrand"),[o]=(0,a.j1)("whatmoreShopId"),[s]=(0,a.j1)("whatmoreHeading"),[l,u]=(0,r.useState)(["initial",window.pageYOffset]),[d,h]=(0,r.useState)(!1),m=(0,a.MO)("isLandingSharedLink");(0,r.useEffect)((()=>{if((0,p.ll)(o),!(0,c.wc0)(o))return;let e=window.pageYOffset,t=!1;const n=()=>{const n=window.pageYOffset;var a,r;Math.abs(n-e)<100?t=!1:(r=!0,u(a=[n>e?"scrolled-down":"scrolled-up",n]),a[1]>100&&h(r),e=n>0?n:0,t=!1)},a=()=>{t||(window.requestAnimationFrame(n),t=!0)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)}),[]);const[v,g,S]=(0,R.YD)({triggerOnce:!0});return(0,y.jsx)("div",{ref:v,style:{display:"block"},children:d||g||m||!(0,c.wc0)(o)?t||n?(0,y.jsx)(z,{heading:s,shopId:i.aA}):(0,y.jsx)(z,{heading:s,shopId:o}):(0,y.jsx)("div",{})})}},499:function(e,t){t.Z={LIVE:{name:"LIVE",color:"gray.600"},UPCOMING:{name:"UPCOMING",color:"gray.600"},DEFAULT:{name:"LIVE EVENT",color:"gray.600"},COMPLETED:{name:"ENDED",color:"gray.600"}}},4897:function(e,t,n){var a=n(499);t.Z=class{static getEventStatus(e){e.time_zone="GMT+5:30";var t=e.start_time+":00",n=e.end_time,r=e.scheduled_date,i=e.status,o=e.time_zone;if(i.toUpperCase()==a.Z.LIVE.name)return{status:a.Z.LIVE,bannerText:" "+a.Z.LIVE.name+" ",timeToStartInMins:0};if(i.toUpperCase()==a.Z.UPCOMING.name){var s=new Date(r+" "+t+" "+o),l=(new Date(r+" "+n+" "+o),function(e){var t=new Date,n=(e.getTime()-t.getTime())/1e3,r=n/60,i=r/60,o=i/24;return n<=0?{status:a.Z.COMPLETED,bannerText:" "+a.Z.COMPLETED.name+" ",timeToStartInMins:0}:n>=1&&n<=30?{status:a.Z.UPCOMING,bannerText:"Starts in "+Math.round(n)+" sec ",timeToStartInMins:n/60}:r<60?{status:a.Z.UPCOMING,bannerText:"Starts in "+Math.round(r)+" min ",timeToStartInMins:r}:i<24?{status:a.Z.UPCOMING,bannerText:"Starts in "+Math.round(i)+" hr ",timeToStartInMins:60*i}:o<7?{status:a.Z.UPCOMING,bannerText:" "+["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]+" ",timeToStartInMins:60*o*24}:{status:a.Z.UPCOMING,bannerText:"Upcoming",timeToStartInMins:2880}}(s));return{status:l.status,bannerText:l.bannerText,timeToStartInMins:l.timeToStartInMins}}return console.error("invalid status for event :: id : "+e.event_id+", status : "+e.status),{status:a.Z.DEFAULT,bannerText:"live event",timeToStartInMins:2880}}}},3388:function(e,t,n){n.d(t,{OC:function(){return s},e8:function(){return i},kT:function(){return a},kW:function(){return o},xg:function(){return r}});const a=function(e,t){return!((void 0==e.products||0==e.products.length)&&(void 0==e.cta||0==e.cta.length))},r=function(e,t){return!(void 0==e.products||0==e.products.length)},i=function(e,t){if(null!=e)return e.filter((e=>1==a(e)))},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=e)return t?e.events[0].events:e.events};const s=function(e,t){var n;if(null==e)return[];if(!("eventsets"in e))return[];const a=null!==(n=e.eventsets[t])&&void 0!==n?n:null;return a?function(e){if(null==e||0==e.length)return[];let t=[];return e.forEach((e=>{e.events.forEach((e=>{t.push(e)}))})),t}(a):[]}},7376:function(e,t,n){n.d(t,{GF:function(){return r},PB:function(){return s},Z2:function(){return i},y4:function(){return o}});var a=n(733);function r(e){let{userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:r,event:i,productList:o,ctaList:s}=e;(0,a.s)({userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:r,event:i,productList:o,ctaList:s})}function i(e){let{userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:r,event:i,productList:o,ctaList:s}=e;(0,a.s)({userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:r,event:i,productList:o,ctaList:s})}function o(e){let{userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:r,event:i,productList:o,ctaList:s}=e;(0,a.s)({userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:r,event:i,productList:o,ctaList:s})}function s(e){let{userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:r,event:i,productList:o,ctaList:s}=e;(0,a.s)({userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:r,event:i,productList:o,ctaList:s})}}}]);