"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[965],{6071:function(e,t,r){r.r(t);var o=r(7313),a=r(6090),l=r(7616),i=(r(6143),r(7850),r(4444),r(7244),r(123),r(5892),r(1811),r(9302)),n=r(2575),s=(r(8984),r(8866)),c=r(7753),h=r(7129),d=r(8811),m=r(8631),p=r(6066),u=r(8782),g=r(9821),v=r(7381),w=r(9854),f=r(5380),x=r(3933),y=r(6417);const C=(0,n.Z)({key:"whatmore-css-cv"});t.default=function(e){const t=e.events,[r,n,S]=(0,s.Z)(),[M,j]=(0,o.useState)(Array(t.length).fill(0).map((()=>Math.random()))),[k,P,Z,b,O]=(0,g.Z)(),R=(0,c.MO)("whatmoreCollectionsTileSize"),E=(0,c.MO)("whatmoreCollectionsTileSizePortrait"),I="portrait"===r?E:R,T="portrait"==r?0:(0,c.MO)("whatmoreLandscapePadding"),q=(0,c.MO)("whatmoreCollectionsTilesSpacing"),{whatmoreIsCollectionsTemplate:B}=(0,o.useContext)(d.I),L=(0,c.MO)("whatmoreShopId"),{whatmoreRootId:V}=(0,o.useContext)(d.I),z=e.onClick,[A,D,H]=(0,x.YD)({triggerOnce:!1});function W(e){z(e)}delete l.ZP.styles.global;var _=[];for(let o=0,a=!1;o<t.length;)a&&o!=t.length-1&&M[o]>.2?(_.push((0,y.jsx)(p.Z,{event1:t[o],event2:t[o+1],onClick:()=>{W(t[o-1])},removeBorders:!0},"collections-tile-"+o)),o+=2,a=!a):(_.push((0,y.jsx)(m.Z,{mode:r,event:t[o],onClick:()=>{W(t[o-1])},removeBorders:!0,borderRadius:"0%"},"collections-tile-"+o)),o+=1,a=!a);return(0,o.useEffect)((()=>{(0,v.Oo)("Video shopping powered by Whatmore!")}),[]),(0,o.useEffect)((()=>{d.$.forEach((e=>{var t;if(!(null!==(t=e.querySelector('.whatmore-template-type[data-wh="template-collections-b"]')||e.querySelector('.whatmore-template-type[data-wh="template-d"]'))&&void 0!==t?t:e.querySelector('.whatmore-template-type[data="template-collections-b"]')||e.querySelector('.whatmore-template-type[data="template-d"]')))return;e&&(e.style.minHeight="0px")}))}),[]),(0,y.jsx)(i.C,{value:C,children:(0,y.jsx)("div",{children:(0,y.jsx)(a.x,{theme:l.ZP,cssVarsRoot:V,resetCSS:!1,children:(0,y.jsxs)(h.V.Provider,{value:{tileTopMargin:0,tileBottomMMargin:0,tileLeftMargin:0,tileRightMargin:0,showPlayButton:!1},children:[(0,y.jsx)("div",{ref:A,style:{marginLeft:T+"px",marginRight:T+"px"},children:(0,y.jsx)(u.P,{renderElement:e=>(0,y.jsx)(y.Fragment,{children:e.eventData}),dataList:_,spacing:q,defaultHeight:k*I*.01+"px",defaultWidth:P*I*.01+"px",retainAlreadyRenderedElements:!0})}),(0,w.dhc)(L)&&B&&!D&&-1==e.index&&(0,y.jsx)(f.Z,{event:t[0],inVideoClick:W,closeClick:t=>{t.stopPropagation(),e.setScreen(-2)}})]})})})})}}}]);