"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[143],{8181:function(e,t,n){var i=n(7313),o=n(8866),r=n(7753),a=n(6417);const s=i.memo((()=>{if(!(0,r.MO)("isLandingSharedLink"))return(0,a.jsx)(a.Fragment,{});const[e]=(0,o.Z)();return(0,a.jsxs)("div",{className:`shimmer-container ${e}`,children:["portrait"===e?(0,a.jsx)("div",{className:"shimmer-item portrait-full",children:(0,a.jsx)("div",{className:"shimmer-effect"})}):Array(3).fill().map(((e,t)=>(0,a.jsx)("div",{className:"shimmer-item landscape-item "+(1===t?"center-item":""),children:(0,a.jsx)("div",{className:"shimmer-effect"})},t))),(0,a.jsx)("style",{children:"\n                    .shimmer-container {\n                        display: flex;\n                        position: fixed;\n                        top: 0;\n                        left: 0;\n                        width: 100vw;\n                        height: 100vh;\n                        overflow-x: scroll;\n                        scroll-snap-type: x mandatory;\n                        scroll-behavior: smooth;\n                        z-index: 1000;\n                    }\n\n                    .portrait {\n                        justify-content: center;\n                        align-items: center;\n                        background: rgba(0, 0, 0, 0.3);\n                    }\n\n                    .landscape {\n                        justify-content: center;\n                        align-items: center;\n                        background: rgba(0, 0, 0, 0.8);\n                    }\n\n                    .shimmer-item {\n                        scroll-snap-align: start;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;\n                        position: relative;\n                        transition: transform 0.3s ease;\n                    }\n\n                    .portrait-full {\n                        width: 100vw;\n                        height: 100vh;\n                        margin: 0; \n                    }\n\n                    .landscape-item {\n                        width: 250px;\n                        height: 450px;\n                        background: #D3D3D3;\n                        border-radius: 8px;\n                        margin-left: -50px; \n                    }\n\n                    .center-item {\n                        width: 360px;\n                        height: 620px;\n                        box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.5); \n                        z-index: 10; \n                    }\n\n                    .shimmer-effect {\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                        width: 100%;\n                        height: 100%;\n                        background: linear-gradient(90deg, rgba(0, 0, 0, 0.3) 25%, rgba(0, 0, 0, 0.5) 50%, rgba(0, 0, 0, 0.3) 75%);\n                        animation: shimmer 2s infinite;\n                        background-size: 200% 100%;\n                    }\n\n                    @keyframes shimmer {\n                        0% {\n                            background-position: -200% 0;\n                        }\n                        100% {\n                            background-position: 200% 0;\n                        }\n                    }\n                "})]})}));t.Z=s},4284:function(e,t,n){n.r(t);var i=n(7313),o=n(9854),r=n(2860),a=n(7753),s=n(5160),c=n(6967),d=n(5380),u=n(58),l=n(8984),p=n(4669),h=n(513),v=n(9302),m=n(2575),f=n(7300),g=n(6524),w=n(8811),_=n(4522),E=n(778),I=n(7643),y=n(7008),L=n(7381),x=n(8181),S=n(6095),b=n(6417);const T=(0,m.Z)({key:"whatmore-css-ppv"}),D=i.lazy((()=>Promise.all([n.e(819),n.e(577),n.e(351),n.e(955),n.e(926),n.e(303),n.e(218),n.e(903)]).then(n.bind(n,3218))));function j(e){return e.split(/[?#]/)[0]}t.default=function(e){const[t,n]=(0,i.useState)(),[m,C]=(0,i.useState)(),[k]=(0,a.j1)("isInDesignMode"),[K]=(0,a.j1)("isDemoBrand"),[O]=(0,a.j1)("whatmoreEmbedAppUseVariant"),[P,V]=(0,i.useState)(-2),[M]=(0,a.j1)("whatmoreVariantId"),[A]=(0,a.j1)("whatmoreShopId");var[N]=(0,a.j1)("whatmoreProductId");const W=(0,a.MO)("isLandingSharedLink"),U=(0,a.MO)("whatmoreShareTemplateId"),B=(0,a.MO)("whatmoreShareEventId"),z=W&&"template-embed"===(0,g.zv)(U),[H,Z]=(0,i.useState)(z);N=(0,o.iXA)(A)?j(window.location.href):N;const[F,G]=(0,i.useState)((()=>"true"===O?M:N));var R=r.Gc+"/v2/brand/"+A+"/product-events";const{whatmoreWidgetSourceDetails:q}=(0,i.useContext)(w.I);(0,i.useEffect)((()=>{(0,L.Oo)("Video shopping powered by Whatmore!"),(0,c.hb)();const e=()=>{const e="_whatmore_bulk_events",t=JSON.parse(localStorage.getItem(e))||[];t&&t.length>0&&((0,y.K)(t),localStorage.removeItem(e))};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[]),(0,i.useEffect)((()=>{(0,p.ll)(A)}),[]),(0,i.useEffect)((()=>{null==t||0==t.length||m||!(0,l.KE)()||(0,a.MO)("whatmoreVideoPlayerPoolInitiated")||(0,u.b5)(u.UD)}),[t]),(0,i.useEffect)((()=>{V(-1),fetch(R.toString()+"?client_product_id="+F.toString()+"&status="+"upcoming".toString()+"&event_type=video").then((e=>e.json())).then((e=>e.events)).then((e=>(null!=e&&0!=e.length&&(0,o.Htz)(A)&&(0,o.d0x)(e),n(e),e))).then((e=>((0,o.yoE)(A)&&function(e,t){setTimeout((async()=>{const n=e.reduce(((e,t)=>[...e,...t.products]),[]).filter((e=>e.client_product_id==t))[0];if(!n||n.product_link==j(window.location.href))return;const i={product_id:n.product_id,product_link:j(window.location.href)};fetch(r.Gc+"/product",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)})}),500)}(e,F),e))).catch((e=>{C(e.message)}))}),[F]),(0,i.useEffect)((()=>{var e,n;V(-2),(t&&t.length>0||(0,o.uO6)(A))&&(0,_.PB)({userInteractionType:E.K.PDP_VISITED,widgetSourceDetails:q,event:null===t||void 0===t?void 0:t[0],productList:null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.products,ctaList:null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.cta})}),[t]),(0,i.useEffect)((()=>{let e=history.pushState;history.pushState=function(){let t=e.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),t};let t=history.replaceState;history.replaceState=function(){let e=t.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),e},window.addEventListener("popstate",(()=>{window.dispatchEvent(new Event("locationchange"))})),window.addEventListener("locationchange",(function(){if("true"===O){const e=function(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0]==e)return i[1]}return!1}("variant");e&&""!==e&&G(e)}}))}),[]),(0,i.useEffect)((()=>{if(null!=t&&0!==t.length&&!m&&z&&((0,S.A)("whatmore-video-player",(()=>{Z(!1)})),null!=B)){const e=t.find((e=>B==e.event_id));if(e)return void Q(e,!0,t.indexOf(e))}}),[t]);const J=q.landingLocationType,Y=q.templateType,Q=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((0,l.KE)()&&!t&&(0,u.QV)(),(0,f.B6)(e)||(0,f.WJ)(e))return k||K||(async()=>{const t=(0,g.NY)(J)+(0,g.dS)(Y)+"_"+(null===e||void 0===e?void 0:e.event_id);(0,s.wh)(e),(0,p.Tc)(A,r.h7,r.dU),(0,c.H4)(e.event_id,e.products,"product_page","video_popup",t)})(),void V(n)};function X(){return(0,b.jsx)(b.Fragment,{})}return null==t||0==t.length||m?(0,b.jsx)("div",{}):(0,b.jsxs)(v.C,{value:T,children:[H&&(0,b.jsx)(x.Z,{}),"no-product"===F||-1===P||0===t.length?(0,b.jsx)(X,{}):-2===P&&t.length>0?(0,b.jsx)("div",{children:(0,b.jsx)(I.u,{userInteractionType:E.K.PDP_POPUP_WIDGET_VIEW,event:t[0],productList:t[0].products,cta:t[0].cta,triggerFlag:!k&&!K,children:(0,b.jsx)(d.Z,{event:t[0],inVideoClick:Q,closeClick:e=>{e.stopPropagation(),V(-1)}})})}):(0,b.jsx)("div",{children:(0,b.jsx)(i.Suspense,{children:(0,b.jsx)(I.u,{userInteractionType:E.K.EVENT_VIEW,event:t[0],productList:t[0].products,cta:t[0].cta,triggerFlag:!k&&!K,children:(0,b.jsx)(D,{events:t,index:P,onBack:function(e){(0,o.n2L)(A)&&(0,a.MO)("whatmoreAddedToCart")&&(0,h.D)(A,(()=>{}),100,window.location.hostname,e),V(-2),Z(!1)},template:"template-product-page"})})})})]})}},6095:function(e,t,n){function i(e,t){let n=0;let i=new MutationObserver((function(){document.querySelector("."+e)?(t(),i.disconnect()):0==n&&(n=1,setTimeout((()=>{t(),i.disconnect()}),8e3))}));i.observe(document.body,{childList:!0,subtree:!0})}n.d(t,{A:function(){return i}})},4522:function(e,t,n){n.d(t,{gW:function(){return s},GF:function(){return c},y4:function(){return u},PB:function(){return l},Z2:function(){return d}});var i=n(9854),o=n(7753),r=n(778);var a=n(733);const s={[r.K.EVENT_VIEW]:"whatmore_video_click_event",[r.K.VIDEO_LIKED]:"whatmore_video_like_event",[r.K.VIDEO_SHARE_CTA_CLICKED]:"whatmore_video_share_event",[r.K.PRODUCT_TILE_ATC_CLICKED]:"whatmore_video_atc_event",[r.K.SHOPNOW_ATC_CLICKED]:"whatmore_video_atc_event"};function c(e){var t;let{userInteractionType:n,userInteractionMetadata:c,widgetSourceDetails:d,event:u,productList:l,ctaList:p}=e;(0,a.s)({userInteractionType:n,userInteractionMetadata:c,widgetSourceDetails:d,event:u,productList:l,ctaList:p}),n in s&&function(e,t){const n=(0,o.MO)("whatmoreShopId");(e!=r.K.EVENT_VIEW||(0,i.UAB)(n))&&(e!=r.K.SHOPNOW_ATC_CLICKED&&e!=r.K.PRODUCT_TILE_ATC_CLICKED||(0,i.Tn_)(n))&&(e!=r.K.VIDEO_LIKED||(0,i.sKB)(n))&&(e!=r.K.VIDEO_SHARE_CTA_CLICKED||(0,i.YOU)(n))&&"function"==typeof fbq&&(async()=>{console.log("hello"),fbq("trackCustom",s[e],{id:null===t||void 0===t?void 0:t.client_product_id,product_url:null===t||void 0===t?void 0:t.product_link})})()}(n,null!==(t=null===l||void 0===l?void 0:l[1])&&void 0!==t?t:null===l||void 0===l?void 0:l[0])}function d(e){let{userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s}=e;(0,a.s)({userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s})}function u(e){let{userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s}=e;(0,a.s)({userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s})}function l(e){let{userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s}=e;(0,a.s)({userInteractionType:t,userInteractionMetadata:n,widgetSourceDetails:i,event:o,productList:r,ctaList:s})}}}]);