"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[580],{3580:function(t,e,r){r.r(e),r.d(e,{default:function(){return m}});var o=r(7313),n=r(8866),i=r(7753),s=(r(9111),r(123),r(9778),r(9854)),a=r(868),l=r(9363),d=r(8984),c=r(6417);var p=function(t){var e,r;const[p,u,h]=(0,n.Z)(),f=(0,i.MO)("whatmorePrimaryFont"),m=(0,i.MO)("whatmoreSecondaryColor"),x=(0,i.MO)("whatmoreShopId"),[g,w]=(0,o.useState)(!1),v=t.storyId,y=(0,a.V)(t.imageUrl),b=t.title,j=t.onClick,k=t.template,S=(0,s.f63)(x),z="template-stories-a"===k?"50%":"30%",C="portrait"==p?1:(0,s.Zyc)(x),F=Math.floor(t.tileSize*C),R=.12*F*(0,s.LM2)(x),M=null!==(e=(0,s.QaQ)(x))&&void 0!==e?e:f,N=null!==(r=(0,s.u2W)(x))&&void 0!==r?r:[m,S,m,S,m],I=(0,o.useRef)(0),O=(0,o.useRef)(null),_=(0,o.useRef)(null);return(0,o.useEffect)((()=>{_.current&&_.current.play()}),[]),(0,c.jsxs)("div",{style:{display:"flex",flexFlow:"column nowrap",justifyContent:"center",alignItems:"center",flexShrink:0,height:"fit-content",width:F*(0,s.jJ6)(x)+"px",marginLeft:"10px",marginRight:"10px",marginTop:"10px",marginBottom:"10px",cursor:"pointer"},onClick:()=>{w(!0),j(v)},className:[g?"whatmore-scale-on-tap":""].join(" "),children:[(0,c.jsx)("div",{style:{display:"flex",flexFlow:"column nowrap",justifyContent:"center",flexShrink:0,height:"fit-content",width:"fit-content",borderRadius:z,paddingBottom:"27951333450"==x&&(0,d.gE)()?"2px":"0",boxShadow:"0px 2px 1px 0px "+N[0]+"50, 0px -2px 1px 0px "+N[1]+"50, 2px 0px 1px 0px "+N[2]+"50, -2px 0px 1px 0px "+N[3]+"80, 2px -2px 1px 0px "+N[4]+"80, -2px 2px 1px 0px "+N[0]+"DA, 2px 2px 1px 0px "+N[1]+"DA, -2px -2px 1px 0px "+N[2]+"DA"},children:(0,c.jsx)("div",{className:"whatmore-story-thumbnail-wrapper",style:{flexShrink:0,objectFit:"cover",height:F+"px",width:F+"px",borderRadius:z,border:"3px solid white",backgroundColor:"#343434"===m?"#d3d3d3":m,overflow:"hidden"},children:"video"==(0,l.$)(y)?(0,c.jsx)("video",{className:"whatmore-story-thumbnail",ref:_,preload:"metadata",loop:!0,playsInline:!0,src:y,muted:!0,alt:"story image",style:{objectFit:"cover",height:F+"px",width:F+"px",backgroundColor:"white",borderRadius:z,paddingBottom:"6px"}}):(0,c.jsx)("img",{ref:O,className:"whatmore-story-thumbnail",src:y,loading:"lazy",style:{objectFit:"cover",height:F+"px",width:F+"px",backgroundColor:"white"},alt:"story image",onError:function(){if(I.current<3){let e=(0,a.V)(t.imageUrl);O.current.src="",O.current.src=e,I.current=I.current+1}else console.log("Failed to load image after several attempts"),O.current.src="https://d2oouab8j9eigo.cloudfront.net/background_white.png"}})})}),(0,c.jsx)("div",{style:{display:"flex",flexFlow:"column nowrap",justifyContent:"center",flexShrink:0,height:"fit-content",width:"100%",marginTop:"10px"},children:(0,c.jsx)("p",{ref:t=>{t&&t.style.setProperty("font-size",R+"px","important")},style:{textAlign:"center",color:(0,s.WS3)(x),fontFamily:M,fontWeight:"normal",lineHeight:"110%",margin:0,padding:0,overflow:"hidden",textOverflow:"ellipsis",width:"auto"},children:null===b||void 0===b?void 0:b.substring(0,24)})})]})},u=r(5572),h=r(9302);const f=(0,r(2575).Z)({key:"whatmore-stories-css"});var m=function(t){const[e,r,a]=(0,n.Z)(),[l]=(0,i.j1)("whatmoreLandscapePadding"),[d]=(0,i.j1)("whatmoreStoryTileSize"),[m]=(0,i.j1)("whatmoreStoryTileSizeDesktop"),[x]=(0,i.j1)("whatmoreShopId"),[g,w]=(0,o.useState)("portrait"===e?"flex-start":"center"),v=(0,o.useRef)(null);var y=t.eventsStories;const b=t.onClick,j=t.template;(0,o.useEffect)((()=>{u.$.forEach((t=>{var e;if(!(null!==(e=t.querySelector('.whatmore-template-type[data-wh="template-stories-a"]'))&&void 0!==e?e:t.querySelector('.whatmore-template-type[data="template-stories-a"]')))return;t&&(t.style.minHeight="0px")}))}),[]);const k=t=>{if(v.current){const e="left"===t?4*-C:4*C;v.current.scrollBy({left:e,behavior:"smooth"})}};(0,o.useEffect)((()=>{!function(){if(v.current){const t=v.current.scrollWidth,e=v.current.offsetWidth;w(t>e?"flex-start":"center")}}()}),[g,a]);const[S,z]=(0,o.useState)([]);(0,o.useEffect)((()=>{z(y.map((t=>t.storyset_dynamic_thumbnail?Math.floor(Math.random()*(t.events.length-1)):0)))}),[]);const C="landscape"===e?r*(m/100)*.3:a*(d/100)*.5;return(0,c.jsx)(h.C,{value:f,children:"landscape"==e&&!(0,s.DF0)(x)||"portrait"==e&&!(0,s.JaA)(x)?(0,c.jsx)(c.Fragment,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{style:{display:"flex",flexFlow:"row nowrap",justifyContent:g,height:"fit-content",width:"100%"},className:"whatmore-story-horizontal-flex",ref:v,children:y.map(((t,e)=>{var r,o;const n=t.storyset_dynamic_thumbnail&&null!==(r=null===(o=t.events[S[e]])||void 0===o?void 0:o.poster_image)&&void 0!==r?r:t.thumbnail_image;return(0,c.jsx)(p,{storyId:t.id,tileSize:(0,s.OFP)(x)?100:C,onClick:t=>{b(e)},template:j,imageUrl:n,title:t.title},"whatmore-story-"+t.id)}))}),"landscape"===e&&(0,s.sMW)(x)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:()=>k("left"),style:{borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.4)",position:"absolute",top:"40%",transform:"translateY(-50%)",left:0},children:(0,c.jsx)("p",{style:{fontSize:"22px",color:"white",padding:"8px"},children:"<"})}),(0,c.jsx)("button",{onClick:()=>k("right"),style:{borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.4)",position:"absolute",top:"40%",transform:"translateY(-50%)",right:0},children:(0,c.jsx)("p",{style:{fontSize:"22px",color:"white",padding:"8px"},children:">"})})]})]})})}},868:function(t,e,r){r.d(e,{V:function(){return a}});var o=r(9854),n=r(7753);const i={"https://d3syezql093hs1.cloudfront.net":"https://whatmore-brand-video-assets.azureedge.net","https://d2r0bijhs9mx1s.cloudfront.net":"https://whatmore-brand-thumbnail-video-assets.azureedge.net","https://d2oouab8j9eigo.cloudfront.net":"https://whatmore-brand-story-assets.azureedge.net","https://d28nus7q7qajdn.cloudfront.net":"https://whatmore-video-assets.azureedge.net","https://d1zl4k1t5o4s75.cloudfront.net":"https://whatmore-brand-video-assets-720p.azureedge.net"},s={"https://d3syezql093hs1.cloudfront.net":"https://whatmore-brand-video-assets.b-cdn.net","https://d2r0bijhs9mx1s.cloudfront.net":"https://whatmore-brand-thumbnail-video-assets.b-cdn.net","https://d2oouab8j9eigo.cloudfront.net":"https://whatmore-brand-story-assets.b-cdn.net","https://d28nus7q7qajdn.cloudfront.net":"https://whatmore-video-assets-old.b-cdn.net","https://d1zl4k1t5o4s75.cloudfront.net":"https://whatmore-brand-video-assets-720p.b-cdn.net"},a=function(t){const e=(0,n.MO)("whatmoreShopId");if(!t)return t;if(t.startsWith("https://cdn.shopify.com"))return t;if("AWSCDN"==(0,o.zpr)(e))return t;if("AZURECDN"==(0,o.zpr)(e)){if(t.includes(".azureedge.net"))return t;if(t.includes(".cloudfront.net")){for(const e of Object.keys(i))if(t.includes(e))return t.replace(e,i[e]);return t}}if("BUNNYCDN"==(0,o.zpr)(e)){if(t.includes(".b-cdn.net"))return t;if(t.includes(".cloudfront.net")){for(const e of Object.keys(s))if(t.includes(e))return t.replace(e,s[e]);return t}}return t}},9363:function(t,e,r){r.d(e,{$:function(){return s},s:function(){return i}});var o=r(9854),n=r(7753);function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=(0,n.MO)("whatmoreShopId");return"shopify"!=(0,o.Ipo)(r)?"STRNV8MHJTF"==r?t+"?format=webp":t:t+e}function s(t){var e;if(null!==t&&void 0!==t&&t.includes("https://w-media.b-cdn.net/process-media"))return"image";const r=null===t||void 0===t||null===(e=t.trim())||void 0===e?void 0:e.split("?")[0],o=/\.(jpeg|jpg|gif|png|svg|webp)$/i,n=/\.(mp4|mov|wmv|avi|flv|mkv)$/i;return null!==o&&void 0!==o&&o.test(r)?"image":null!==n&&void 0!==n&&n.test(r)?"video":void 0}},9111:function(){},123:function(){},9778:function(){}}]);