"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[360],{58:function(e,t,n){n.d(t,{Bi:function(){return a},P7:function(){return s},QV:function(){return u},UD:function(){return i},b5:function(){return c}});var o=n(7753);const i=6;function r(){const e=(0,o.MO)("whatmoreVideoPlayerPool");var t=document.createElement("video");return t.setAttribute("class","whatmore-video-player whatmore-main-video-player-from-pool"),t.setAttribute("width","100%"),t.setAttribute("src","https://whatmore-other-assets.b-cdn.net/whatmore/dummy_for_video_pool_3s_muted_11kb.mp4"),t.muted=!0,t.setAttribute("height","100%"),t.setAttribute("preload","metadata"),t.setAttribute("loop",""),t.setAttribute("playsinline",""),t.setAttribute("x-webkit-airplay","allow"),t.controls=!1,e.appendChild(t),t}const c=function(e){for(let t=1;t<=e;t++)r();(0,o.bU)("whatmoreVideoPlayerPoolInitiated",!0)};const a=function(e,t,n,i){(0,o.MO)("whatmoreVideoPlayerPool");const r=function(e,t,n){var i=(r=(0,o.MO)("whatmoreVideoPlayerPool").children,r.length>0?r[0]:null);var r;if(!i)throw new Error("Whatmore :: not enough blessed videos available in video pool.");return i.setAttribute("src",e),i.muted=t,i.play().then((()=>{!n&&i.pause()})).catch((e=>{})),i}(t,n,i);return e.innerHTML="",e.appendChild(r),r},u=async function(){const e=(0,o.MO)("whatmoreVideoPlayerPool"),t=(0,o.MO)("whatmoreVideoPlayerPoolInitiated");t||c(i);var n=[];for(let o of e.children){o.muted=!0;var r=o.play().then((e=>(!t&&o.pause(),e)));n.push(r)}await Promise.all(n).then((e=>{(0,o.bU)("whatmoreVideoPlayerPoolBlessed",!0)})).catch((e=>{console.error("Whatmore :: Error while blessing "+e.message)}))},s=function(e){const t=(0,o.MO)("whatmoreVideoPlayerPool"),n=e.children[0];n.muted=!0,!n.paused&&n.pause(),t.appendChild(n)}},8984:function(e,t,n){n.d(t,{KE:function(){return c},eE:function(){return r},gE:function(){return i}});var o=n(4862);const i=function(){return o.gn},r=function(){return o.Q5},c=function(){return i()||r()}},7300:function(e,t,n){n.d(t,{B6:function(){return o},WJ:function(){return i},yC:function(){return r}});const o=function(e){return"video"===e.event_type},i=function(e){return"image"===e.event_type},r=function(e){return"livestream"===e.event_type}},5160:function(e,t,n){n.d(t,{$L:function(){return p},JX:function(){return l},Z6:function(){return a},lY:function(){return s},rp:function(){return v},uD:function(){return h},wh:function(){return c},wz:function(){return d},x0:function(){return u}});var o,i=n(2860);const r=null!==(o="true"==localStorage.getItem("whatmoreActivateLogs"))&&void 0!==o&&o;function c(e){r&&console.debug("updating user view count for event.");const t={event_id:e.event_id,increase_by:1};fetch(i.Gc+"/event/metrics/views",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>(r&&console.debug("updating user view count response : HTTP "+e.status),e.json()))).then((e=>{r&&console.debug("updating user view count response : "+JSON.stringify(e))})).catch((e=>{console.error("error updating user view count user for event : ",e)}))}function a(e,t){r&&console.debug("updating like count for event.");const n={event_id:e.event_id,increase_by:t};fetch(i.Gc+"/event/metrics/like",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>(r&&console.debug("updating like count response : HTTP "+e.status),e.json()))).then((e=>{r&&console.debug("updating like count response : "+JSON.stringify(e))})).catch((e=>{console.error("error updating like count user for event : ",e)}))}function u(e){r&&console.debug("updating share count for event.");const t={event_id:e.event_id,increase_by:1};fetch(i.Gc+"/event/metrics/share",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>(r&&console.debug("updating share count response : HTTP "+e.status),e.json()))).then((e=>{r&&console.debug("updating share count response : "+JSON.stringify(e))})).catch((e=>{console.error("error updating share count user for event : ",e)}))}function s(e,t){r&&console.debug("updating wa click count for event.");const n={event_id:e.event_id,increase_by:t};fetch(i.Gc+"/event/metrics/whatsapp",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>(r&&console.debug("updating whatsapp click count response : HTTP "+e.status),e.json()))).then((e=>{r&&console.debug("updating whatsapp click count response : "+JSON.stringify(e))})).catch((e=>{console.error("error updating whatsapp click count user for event : ",e)}))}function d(e,t){r&&console.debug("updating event-product click count for event {} and product {}.",e.event_id,t.product_id);const n={event_id:e.event_id,product_id:t.product_id,increase_by:1};fetch(i.Gc+"/event/metrics/clicks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>(r&&console.debug("updating user event-product click count response : HTTP "+e.status),e.json()))).then((e=>{r&&console.debug("updating user event-product click count response : "+JSON.stringify(e))})).catch((t=>{console.error("error updating user event-product click count for event {} : ",e.event_id,t)}))}function l(e,t,n){r&&console.debug("updating event-product add to cart count for event {} and product {}.",e.event_id,t.product_id);const o={event_id:e.event_id,product_id:t.product_id,increase_by:n};fetch(i.Gc+"/event/metrics/add_to_cart",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>(r&&console.debug("updating user event-product add to cart count response : HTTP "+e.status),e.json()))).then((e=>{r&&console.debug("updating user event-product add to cart count response : "+JSON.stringify(e))})).catch((t=>{console.error("error updating user event-product add to cart count for event {} : ",e.event_id,t)}))}function p(e,t){r&&console.debug("updating event-product buy now count for event {} and product {}.",e.event_id,t.product_id);const n={event_id:e.event_id,product_id:t.product_id,increase_by:1};fetch(i.Gc+"/event/metrics/buy_now",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>(r&&console.debug("updating user event-product buy now count response : HTTP "+e.status),e.json()))).then((e=>{r&&console.debug("updating user event-product buy now count response : "+JSON.stringify(e))})).catch((t=>{console.error("error updating user event-product buy now count for event {} : ",e.event_id,t)}))}async function v(){let{storeId:e="",eventId:t=0,productId:n="",variantId:o="",cartToken:c="",checkoutToken:a="",quantity:u=0,price:s="",actionType:d="",trackingId:l=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p={event_id:t,product_id:n,cart_token:c,checkout_token:a,quantity:u,price:s,variant_id:o,action_type:d,tracking_id:l};r&&console.debug("initiating ATC metadata event for eventId {}, productId {}, variantId {} ",t,n,o);const v=await fetch(i.Gc+"/cart-metadata/"+e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(p)}).then((e=>(r&&console.debug("initiating ATC metadata event for eventId {}, productId {}, variantId {} : HTTP "+e.status),e.json()))).catch((e=>{console.error("error initiating ATC metadata event for eventId {}, productId {}, variantId {} : ",t,n,o)}));return v}function h(e){const t={event_id:e.event.event_id,cta_id:e.cta.cta_id,increase_by:1};fetch(i.Gc+"/event/metrics/cta/clicks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>(r&&console.debug("updating user cta click count response : HTTP "+e.status),e.json()))).then((e=>{r&&console.debug("updating user cta click count response : "+JSON.stringify(e))})).catch((e=>{console.error("error updating cta click count : ",e)}))}},4669:function(e,t,n){n.d(t,{Tc:function(){return v},ll:function(){return p}});var o,i=n(1824),r=n(7786),c=n(9854);const a="Whatmore Video Shopping",u=null!==(o="true"==localStorage.getItem("whatmoreActivateLogs"))&&void 0!==o&&o,s="Video View",d={carousel:"Carousel",stories:"Stories",video_popup:"Video Popup"},l={homepage:"Home Page",product_page:"Product Page"};async function p(e){if((0,c.DvX)(e)&&null!==(0,c.hfN)(e)&&(r.ZP.initialize((0,c.hfN)(e)),u&&console.debug("Whatmore: initialized GA4")),(0,c.hvq)(e)&&null!==(0,c.BHj)(e)){const t=(0,c.OQz)(e);i.ZP.initialize((0,c.BHj)(e),{useExistingGa:t}),u&&console.debug("Whatmore: initialized GA3")}}async function v(e,t,n){(0,c.hvq)(e)&&null!==(0,c.BHj)(e)&&(i.ZP.event({category:a,action:s,label:l[t]+":"+d[n]}),u&&console.debug("Whatmore: pushed view event to GA3")),(0,c.DvX)(e)&&null!==(0,c.hfN)(e)&&(r.ZP.event({category:a,action:s+":"+l[t]+":"+d[n],value:1,nonInteraction:!1}),u&&console.debug("Whatmore: pushed view event to GA4"))}},733:function(e,t,n){n.d(t,{s:function(){return p}});var o=n(7381),i=n(9854),r=n(7753),c=n(7008);const a=function(e,t,n,o){var i;return{landing_location_type:t.landingLocationType,template_type:t.templateType,whatmore_event:{id:e.event_id,eventset_id:null!==(i=e.eventset_id)&&void 0!==i?i:null,cta_list:o.map((e=>e.cta_id)),product_list:n.map((e=>e.product_id))}}};var u=n(778),s=n(2751),d=n(6967);const l=function(){return{user_id:(0,d.hb)(),session_id:(0,d.sQ)(),user_group:"group-a",user_agent:navigator.userAgent,store_id:(0,r.MO)("whatmoreShopId"),hostname:window.location.hostname,page_path:window.location.pathname,event_id:(0,s.x0)(),event_timestamp:Math.round((new Date).getTime()/1e3)}},p=function(){let{userInteractionType:e="",userInteractionMetadata:t={},widgetSourceDetails:n={},event:s="",productList:d=[],ctaList:p=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const v=(0,r.MO)("isInDesignMode"),h=(0,r.MO)("isDemoBrand"),g=(0,r.MO)("whatmoreShopId");if(!(0,i.AAS)(g)||h||v)return;const _="_whatmore_bulk_events",f=l(),m=(0,u.r)(e,t),y=a(s,n,d,p),w=(0,r.MO)("whatmoreLoggingActive"),b={...f,interaction_data:m,data:y},I=JSON.parse(localStorage.getItem(_))||[];if(I.push(b),localStorage.setItem(_,JSON.stringify(I)),w&&(0,o.EI)(b),clearTimeout(localStorage.getItem("_whatmore_bulk_timer_id")),I.length>=10)(0,c.K)(I),localStorage.removeItem(_);else if(I.length>0){let e=setTimeout((()=>{(0,c.K)(I),localStorage.removeItem(_)}),14e3);localStorage.setItem("_whatmore_bulk_timer_id",e)}}},778:function(e,t,n){n.d(t,{K:function(){return o},r:function(){return i}});const o=Object.freeze({EVENT_VIEW:"event-view",PRODUCT_CTA_VIEW:"product-cta-view",SHOPNOW_ATC_CLICKED:"shop-now-atc-clicked",SHOPNOW_BUYNOW_CLICKED:"shop-now-buy-now-clicked",PRODUCT_TILE_ATC_CLICKED:"product-tile-atc-clicked",PRODUCT_TILE_SHOPNOW_CLICKED:"product-tile-shopnow-clicked",VIDEO_LIKED:"video-liked",VIDEO_UNLIKED:"video-unliked",VIDEO_SHARE_CTA_CLICKED:"video-share-cta-clicked",VIDEO_MUTED:"video-muted",HOMEPAGE_CAROUSEL_SWIPED:"homepage-carousel-swiped",HOMEPAGE_VISITED:"homepage-visited",COLLECTION_PAGE_VISITED:"collection-page-visited",PDP_VISITED:"product-page-visited",HOMEPAGE_CAROUSEL_WIDGET_VIEW:"homepage-carousel-widget-view",BANNER_WIDGET_VIEW:"banner-widget-view",STORIES_WIDGET_VIEW:"stories-widget-view",COLLECTION_WIDGET_VIEW:"collection-widget-view",SPOTLIGHT_WIDGET_VIEW:"spotlight-widget-view",PDP_POPUP_WIDGET_VIEW:"pdp-popup-widget-view",VIDEO_PLAYBACK:"video-playback",SHOPNOW_CLICKED:"shopnow-clicked",WHATSAPP_ICON_CLICKED:"whatsapp-icon-clicked",BANNER_WIDGET_CLICKED:"banner-widget-clicked"}),i=function(e,t){return{name:e,metadata:JSON.stringify(t)}}},7643:function(e,t,n){n.d(t,{u:function(){return u}});var o=n(3933),i=n(9039),r=n(7313),c=n(733),a=n(6417);const u=function(e){var t;const{ref:n,inView:u,entry:s}=(0,o.YD)({triggerOnce:!1,threshold:null!==(t=e.threshold)&&void 0!==t?t:1}),{whatmoreWidgetSourceDetails:d}=(0,r.useContext)(i.I);return(0,r.useEffect)((()=>{var t,n,o,i;u&&null!==(t=e.triggerFlag)&&void 0!==t&&t&&(0,c.s)({userInteractionType:e.userInteractionType,userInteractionMetadata:null!==(n=e.userInteractionMetadata)&&void 0!==n?n:{},widgetSourceDetails:d,event:e.event,productList:null!==(o=e.productList)&&void 0!==o?o:[],ctaList:null!==(i=e.ctaList)&&void 0!==i?i:[]})}),[u]),(0,a.jsx)("div",{ref:n,children:e.children})}}}]);