"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[151],{7136:function(e,t,r){var i=r(9950),o=r(932),a=r(7509),l=r(5830),s=r(4414);t.A=function(e){var[t,r]=(0,o.A)();(0,i.useContext)(a.h);const n=(0,l.Xd)("whatmoreShopId");return e.event,(0,s.jsx)("div",{style:{margin:"0 auto",width:"8968077397"==n?void 0:r,aspectRatio:"8968077397"==n?9/16:void 0,height:"8968077397"==n?"100%":t,overflow:"hidden"}})}},7509:function(e,t,r){r.d(t,{h:function(){return i}});const i=(0,r(9950).createContext)({tileTopMargin:10,tileBottomMMargin:10,tileLeftMargin:10,tileRightMargin:10,showPlayButton:!0})},9112:function(e,t,r){r.r(t),r.d(t,{default:function(){return I}});var i=r(9950),o=r(340),a=r(5089),l=r(5873),s=r(572),n=r(8603),c=r(9946),d=r(9094),u=(r(9130),r(932)),m=r(1941),p=r(5491),h=r.n(p),v=r(5830),w=r(7509),g=r(7136),y=r(1348),f=r(5903),x=r(1351),_=r(6157),j=(r(6641),r(9879)),S=r(22),N=r(6594),C=r(8149),P=r(7740),b=r(4414);var M=function(e){var t,r,o,a,l,s,n,c,d,m,p,h,w,g,f;const x=(0,i.useRef)(null),[_,M,A,R,k]=(0,u.A)(),I=1*M,T=1*_,E=((0,v.Xd)("whatmoreUITheme"),(0,v.Xd)("whatmoreShopId")),F="portrait"===k[S.dl],B=F?(0,y.HWj)(E):(0,y.N_4)(E),O=(0,v.Xd)("whatmorePrimaryFont"),U=(0,v.Xd)("whatmoreSecondaryColor"),V=e.onClick,W=null===(t=e.isOnFocus)||void 0===t||t,X=null!==(r=e.playOnUnfocus)&&void 0!==r&&r,[D,H]=(0,i.useState)(e.event),[L,z]=(0,i.useState)(),[q,$]=(0,i.useState)(!1),Q=null!==(o=null===(a=D.products)||void 0===a?void 0:a.find(e=>"active"==e.product_status))&&void 0!==o?o:null===(l=D.products)||void 0===l?void 0:l[0],G=Math.round(+(null===Q||void 0===Q?void 0:Q.price)),J=Math.round(+(null===Q||void 0===Q?void 0:Q.compare_price)),K=J&&0!=J&&J>G?Math.round((J-G)/J*100):NaN,[Y,Z]=(0,i.useState)(K),[ee,te]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{(0,y.w4b)(E)?(0,N.fu)(D,(0,y.NCy)(E),E).then(e=>{var t,r,i;H(e);const o=Math.round(null===(t=e.products)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.price),a=Math.round(null===e||void 0===e||null===(i=e.products[0])||void 0===i?void 0:i.compare_price),l=a&&0!=a&&a>o?Math.round((a-o)/a*100):NaN;Z(l),te(!0)}).catch(e=>{console.warn("Whatmore AI Template: Failed to enrich event with price data, using fallback",e),te(!0)}):(async()=>{try{const e=await(0,C.M)(Q,(0,y.NCy)(E),E);z(e),te(!0)}catch(e){console.warn("Whatmore AI Template: Failed to fetch product details, using fallback data",e),te(!0)}})()},[]),(0,i.useEffect)(()=>{if(x.current){const e=x.current,t=F?"portrait":"landscape",r=getComputedStyle(e),i=parseFloat(r.getPropertyValue(`--wtmr-name-font-scale-${t}`))||(F?1.25:1.38),o=parseFloat(r.getPropertyValue(`--wtmr-price-font-scale-${t}`))||(F?1.4:1.56),a=parseFloat(r.getPropertyValue(`--wtmr-category-font-scale-${t}`))||(F?1:1.08),l=parseFloat(r.getPropertyValue(`--wtmr-discount-font-scale-${t}`))||(F?1.1:1.2);e.style.setProperty("--wtmr-font-family",O),e.style.setProperty("--wtmr-discount-badge-bg",U),e.style.setProperty("--wtmr-tile-width",M+"px"),e.style.setProperty("--wtmr-font-multiplier",B),e.style.setProperty("--wtmr-name-font-scale",i),e.style.setProperty("--wtmr-price-font-scale",o),e.style.setProperty("--wtmr-category-font-scale",a),e.style.setProperty("--wtmr-discount-font-scale",l)}},[O,U,M,B,F]),(0,b.jsxs)("div",{ref:x,className:"wtmr-carousel-tile",style:{maxWidth:I},onClick:()=>V(D),children:[(0,b.jsxs)("div",{className:"wtmr-carousel-tile__video-container",style:{maxHeight:T},children:[(0,b.jsx)(j.A,{className:"wtmr-carousel-tile__video",height:(0,y.u06)(E)+" !important",width:"100%",url:D.thumbnail_image,isPlaying:W||X,event:D}),Q&&(0,b.jsx)("div",{className:"wtmr-carousel-tile__add-to-cart-overlay",onClick:e=>e.stopPropagation(),children:(0,b.jsx)("span",{className:"wtmr-carousel-tile__add-to-cart-label",children:"ADD TO CART"})})]}),Q&&(0,b.jsxs)("div",{className:"wtmr-carousel-tile__product-details-container",children:[(0,b.jsxs)("div",{className:"wtmr-carousel-tile__product-information-section",children:[(null===Q||void 0===Q?void 0:Q.thumbnail_image)&&(0,b.jsx)("div",{className:"wtmr-carousel-tile__product-image-container",children:(0,b.jsx)("img",{className:"wtmr-carousel-tile__product-image "+(q?"wtmr-carousel-tile__product-image--loaded":""),src:(null===Q||void 0===Q||null===(s=Q.thumbnail_image)||void 0===s||null===(n=s.split("?"))||void 0===n?void 0:n[0])+"?width=400&height=400",alt:"thumbnail",onLoad:()=>$(!0)})}),(0,b.jsxs)("div",{className:"wtmr-carousel-tile__product-text-container",children:[(null===Q||void 0===Q?void 0:Q.product_type)&&(0,b.jsx)("p",{className:"wtmr-carousel-tile__product-category-label",children:null===Q||void 0===Q?void 0:Q.product_type}),(null===Q||void 0===Q?void 0:Q.title)&&(0,b.jsx)("p",{className:"wtmr-carousel-tile__product-name",children:null===Q||void 0===Q?void 0:Q.title})]})]}),ee&&(0,b.jsxs)("div",{className:"wtmr-carousel-tile__product-pricing-section",children:[(0,b.jsx)("p",{className:"wtmr-carousel-tile__price-selling",children:(0,N.Sb)(parseFloat((0,P.U)()?(null!==(c=null===L||void 0===L||null===(d=L.variants)||void 0===d||null===(m=d[0])||void 0===m?void 0:m.price)&&void 0!==c?c:null===L||void 0===L?void 0:L.price)/100:null===Q||void 0===Q?void 0:Q.price)," ",E,null===(p=D.products[0])||void 0===p?void 0:p.currency)}),!isNaN(J)&&J>G&&(0,b.jsx)("p",{className:"wtmr-carousel-tile__price-original",children:(0,N.Sb)(parseFloat((0,P.U)()?(null!==(h=null===L||void 0===L||null===(w=L.variants)||void 0===w||null===(g=w[0])||void 0===g?void 0:g.compare_at_price)&&void 0!==h?h:null===L||void 0===L?void 0:L.compare_at_price)/100:null===Q||void 0===Q?void 0:Q.compare_price)," ",E,null===(f=D.products[0])||void 0===f?void 0:f.currency)}),!isNaN(Y)&&0!=Y&&(0,b.jsx)("div",{className:"wtmr-carousel-tile__discount-percentage-badge",children:(0,b.jsxs)("p",{className:"wtmr-carousel-tile__discount-percentage-value",children:[Y,"%"]})})]})]})]})};const A=(0,n.A)({key:"whatmore-css-ai"});function R(e){const[t,r,o]=(0,u.A)(),[a,l,s]=(0,m.A)(),n=(0,v.Xd)("whatmoreShopId"),p=e.events,h=e.onClick,w=o*(0,y.kcl)(n),j=(0,y.cbh)(n),[S,N]=(0,i.useState)(j?p.length:w),{whatmoreWidgetSourceDetails:C}=(0,i.useContext)(f.B);return(0,i.useEffect)(()=>{S<=w&&N(e=>e+w)},[w]),(0,b.jsx)("div",{className:"wtmr-carousel-container-portrait whatmore-events-carousel-portrait ai-carousel-portrait",style:{width:s-48,zIndex:1},children:(0,b.jsx)(c.RC,{slidesPerView:p.length>1?w:1,initialSlide:p.length>1?1:0,centeredSlides:!0,centeredSlidesBounds:!1,watchSlidesProgress:!0,modules:[d.U1],spaceBetween:12,freeMode:{enabled:!0,sticky:!1,momentum:!0,momentumRatio:.7,momentumBounce:!1,momentumVelocityRatio:.9},touchRatio:1.2,simulateTouch:!0,allowTouchMove:!0,grabCursor:!0,resistance:!0,resistanceRatio:.75,speed:400,onSlideChange:e=>{(0,x.UM)({userInteractionType:_.O.HOMEPAGE_CAROUSEL_SWIPED,widgetSourceDetails:C}),e.realIndex>e.previousIndex&&N(e=>e+w)},loop:j,style:{paddingTop:"8px",paddingBottom:"8px"},children:p.map((e,t)=>t<=S&&(0,b.jsx)(c.qr,{children:({isActive:t,isPrev:r,isNext:i,isVisible:o})=>r||i||t?(0,b.jsx)("div",{className:"wm-carousel__slide-wrapper "+(t?"wtmr-carousel__slide-wrapper--active":"wtmr-carousel__slide-wrapper--inactive"),children:(0,b.jsx)(M,{isOnFocus:t&&o,playOnUnfocus:!1,event:e,onClick:()=>{h(e)}})}):(0,b.jsx)(g.A,{})},"whatmore-event-tile-ai-portrait-"+e.index))})})}function k(e){const[t,r,o,a]=(0,u.A)(),[l,s,n]=(0,m.A)(),[p,w]=(0,i.useState)(-1),j=(0,v.Xd)("whatmoreShopId"),S=e.onClick,N=e.events,C=(0,y.cbh)(j),[P,A]=(0,i.useState)(C?N.length:o),R=Math.min(o,N.length),{whatmoreWidgetSourceDetails:k}=(0,i.useContext)(f.B),I=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(I.current){const e=r*R*(0,y.fHt)(j)+"px";N.length<4?I.current.style.setProperty("width",e,"important"):I.current.style.width=e}},[r,R,j,P,N.length]),(0,i.useEffect)(()=>{P<=o&&A(e=>e+o)},[o]),(0,b.jsx)("div",{className:"wtmr-carousel-container-landscape whatmore-events-carousel-landscape ai-carousel-landscape",style:{width:n,paddingLeft:a+"px",paddingRight:a+"px"},children:(0,b.jsx)("div",{ref:I,style:{zIndex:1},children:(0,b.jsx)(c.RC,{slidesPerView:R,watchSlidesProgress:!0,modules:[d.FJ,d.U1],freeMode:{enabled:!0,sticky:!1,momentum:!0,momentumRatio:.5,momentumBounce:!1,momentumVelocityRatio:.7},onSlideChange:e=>{(0,x.UM)({userInteractionType:_.O.HOMEPAGE_CAROUSEL_SWIPED,widgetSourceDetails:k}),e.realIndex>e.previousIndex&&A(e=>e+o)},spaceBetween:0,loop:!1,touchRatio:1,simulateTouch:!0,allowTouchMove:!0,grabCursor:!0,resistance:!0,resistanceRatio:.75,speed:500,mousewheel:{forceToAxis:!0,sensitivity:.6,releaseOnEdges:!0,invert:!1},children:N.map((e,t)=>{const r=h()(()=>w(t),50);return t<=P&&(0,b.jsx)(c.qr,{onMouseEnter:()=>{r()},onMouseLeave:()=>{r.cancel(),w(-1)},style:{height:"100%"},children:({isActive:r,isPrev:i,isNext:o,isVisible:a})=>a||i||o?(0,b.jsx)("div",{style:{height:"100%",transform:t===p?"translate3d(0, -1px, 0)":"translate3d(0, 0, 0)",transition:"transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94), filter 0.3s ease-out, opacity 0.3s ease-out",filter:t===p?"brightness(1.02)":"none",opacity:t===p?1:.98,willChange:"transform, filter, opacity"},children:(0,b.jsx)(M,{isOnFocus:t==p,playOnUnfocus:!(0,y.aO7)(j)||t==parseInt(R/2)&&-1==p,event:e,onClick:()=>{S(e)}})}):(0,b.jsx)(g.A,{})},"wht-event-tile-ai-landscape-"+e.index)})})})})}var I=function(e){const[t,r,n]=(0,m.A)(),[c]=(0,v.QN)("whatmoreShopId"),[d]=(0,v.QN)("whatmorePrimaryColor"),[u]=(0,v.QN)("whatmoreTitleFont"),p="portrait"==t?(0,v.Xd)("whatmoreTitleFontSizePortrait"):(0,v.Xd)("whatmoreTitleFontSize"),{whatmoreRootId:h}=(0,i.useContext)(f.B),{whatmoreCollectionHeading:g}=(0,i.useContext)(f.B),{whatmoreIsCollectionsTemplate:y}=(0,i.useContext)(f.B),x=e.events,_=e.onClick,j=u,S=(0,i.useRef)(null);function N(e){_(e)}return(0,i.useEffect)(()=>{l.Sn.forEach(e=>{var t;const r=null!==(t=e.querySelector('.whatmore-template-type[data-wh="template-ai"]'))&&void 0!==t?t:e.querySelector('.whatmore-template-type[data="template-ai"]');if(!r)return;r&&e&&(e.style.minHeight="0px")})},[]),(0,i.useEffect)(()=>{if(S.current){const e=S.current;e.style.setProperty("--wtmr-font-family",j),e.setAttribute("data-mode",t)}},[j,t]),delete a.Ay.styles.global,(0,b.jsx)(s.C,{value:A,children:(0,b.jsx)("div",{ref:S,className:"wtmr-carousel whatmore-carousel-events ai-carousel-container",style:{height:"100%",background:"transparent",position:"relative"},children:(0,b.jsx)(o.s,{theme:a.Ay,cssVarsRoot:h,resetCSS:!1,children:(0,b.jsxs)(w.h.Provider,{value:{tileTopMargin:8,tileBottomMMargin:8,tileLeftMargin:2,tileRightMargin:2,showPlayButton:!0},children:[console.log("test",e.heading.trim())&&(e.heading.trim().length>0||y)&&(0,b.jsx)("div",{className:"wtmr-carousel-header",children:(0,b.jsx)("h2",{className:"wtmr-carousel-title",style:{fontSize:p+"px"},children:y?"W"!==g?g:"":e.heading})}),"landscape"===t?(0,b.jsx)(k,{events:x,onClick:N}):(0,b.jsx)(R,{events:x,onClick:N})]})})})})}}}]);