"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[972],{3972:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var o=n(7753),a=n(7313),r=n(2860),i=n(499),c=n(4897),s=n(5160),d=n(9854),u=n(6967),l=n(8984),p=n(58),h=n(4669),m=n(941),v=n(6966),g=n(7300),f=n(6524),b=n(6417);const y=a.lazy((()=>Promise.all([n.e(302),n.e(725),n.e(648),n.e(367),n.e(240),n.e(853),n.e(926),n.e(282),n.e(95)]).then(n.bind(n,4095)))),T=a.lazy((()=>Promise.all([n.e(302),n.e(725),n.e(648),n.e(367),n.e(240),n.e(576),n.e(664),n.e(517)]).then(n.bind(n,5523)))),_=a.lazy((()=>Promise.all([n.e(302),n.e(725),n.e(648),n.e(367),n.e(926),n.e(642),n.e(136)]).then(n.bind(n,3827)))),S=a.lazy((()=>Promise.all([n.e(302),n.e(725),n.e(648),n.e(367),n.e(926),n.e(642),n.e(92)]).then(n.bind(n,6071)))),w=a.lazy((()=>Promise.all([n.e(302),n.e(725),n.e(648),n.e(367),n.e(926),n.e(642),n.e(245)]).then(n.bind(n,1291)))),j=a.lazy((()=>Promise.all([n.e(302),n.e(580)]).then(n.bind(n,3580)))),x=a.lazy((()=>Promise.all([n.e(302),n.e(725),n.e(648),n.e(240),n.e(576),n.e(853),n.e(843),n.e(926),n.e(921),n.e(282),n.e(166)]).then(n.bind(n,7490)))),I=a.lazy((()=>Promise.all([n.e(302),n.e(725),n.e(648),n.e(367),n.e(240),n.e(853),n.e(926),n.e(664),n.e(850)]).then(n.bind(n,4048)))),C=a.lazy((()=>Promise.all([n.e(302),n.e(725),n.e(648),n.e(367),n.e(240),n.e(576),n.e(664),n.e(602)]).then(n.bind(n,8091))));var E=function(e){const[t]=(0,o.j1)("isInDesignMode"),[n]=(0,o.j1)("isDemoBrand"),[E]=(0,o.j1)("whatmoreTopBottomPadding"),[P]=(0,o.j1)("whatmoreStoriesTopBottomPadding"),{whatmoreIsStoriesTemplate:O}=(0,a.useContext)(v.I),[M]=(0,o.j1)("whatmoreShopId"),{whatmoreEventsBrowsingTemplate:k}=(0,a.useContext)(v.I),D=(0,o.MO)("isLandingSharedLink"),N=(0,o.MO)("whatmoreShareTemplateId"),L=(0,o.MO)("whatmoreShareStoryId"),Z=(0,o.MO)("whatmoreShareEventId"),[G,A]=(0,a.useState)(-1),[J,z]=(0,a.useState)(null);var H=e.events,U=null;function B(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,l.KE)()&&!o&&(0,p.QV)(),t||n||(async()=>{const t=U[e].events[0];(0,s.wh)(t),(0,h.Tc)(M,r.Xh,r.OW),(0,u.H4)(t.event_id,t.products,"homepage","stories")})();var i=0;null!=a&&U[e].events.map(((e,t)=>{e.event_id==a&&(i=t)})),A(i),z(e)}function V(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,l.KE)()&&!o&&(0,p.QV)(),(0,g.B6)(e)||(0,g.WJ)(e))return t||n||(async()=>{(0,s.wh)(e),(0,h.Tc)(M,r.Xh,r.pR),(0,u.H4)(e.event_id,e.products,"homepage","carousel")})(),void A(e.index);const a=20;var{status:d,bannerText:m,timeToStartInMins:v}=c.Z.getEventStatus(e);v<=a&&d.name!==i.Z.LIVE.name?console.debug(" TODO : show toast on upcoming live event."):A(e.index)}function R(e){return(0,b.jsx)(b.Fragment,{})}return O&&!U&&(U=function(e){var t=e.reduce(((e,t,n)=>{var o=t.storyset_id;return o in e?(e[o].total_events=e[o].total_events+1,e[o].events.push(t)):e[o]={id:t.storyset_id,title:t.storyset_name,thumbnail_image:t.storyset_thumbnail_image,total_events:1,start_event_index:n,events:[t]},e}),{}),n=Object.values(t);return n.sort(((e,t)=>e.start_event_index-t.start_event_index)),n}(H)),(0,a.useEffect)((()=>{D&&k==(0,f.z)(N)&&(null!=L&&O?U.forEach(((e,t)=>{L==e.id&&B(t,!0,Z)})):null!=Z&&H.forEach(((e,t)=>{Z==e.event_id&&V(e,!0)})))}),[]),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{style:{marginTop:(O?P:E)+"px",marginBottom:(O?P:E)+"px"},children:"template-b"===k?(0,b.jsx)(a.Suspense,{children:(0,b.jsx)(y,{events:H,onClick:V,heading:e.heading})}):"template-a-1"===k?(0,b.jsx)(a.Suspense,{children:(0,b.jsx)(T,{events:H,onClick:V,heading:e.heading})}):"template-feed-a"===k?(0,b.jsx)(a.Suspense,{children:(0,b.jsx)(C,{events:H,onClick:V,heading:e.heading})}):"template-collections-a"===k||"template-c"===k?(0,b.jsx)(a.Suspense,{children:(0,b.jsx)(_,{events:H,onClick:V,heading:e.heading})}):"template-collections-b"===k||"template-d"===k?(0,b.jsx)(a.Suspense,{children:(0,b.jsx)(S,{events:H,onClick:V,heading:e.heading})}):"template-collections-c"===k||"template-e"===k?(0,b.jsx)(a.Suspense,{children:(0,b.jsx)(w,{events:H,onClick:V,heading:e.heading})}):"template-collections-d"===k?(0,b.jsx)(a.Suspense,{children:(0,b.jsx)(y,{events:H,onClick:V,heading:e.heading})}):"template-collections-e"===k?(0,b.jsx)(a.Suspense,{children:(0,b.jsx)(I,{events:H,onClick:V,heading:e.heading})}):O?(0,b.jsx)(a.Suspense,{children:(0,b.jsx)(j,{eventsStories:U,onClick:B,template:k})}):(0,b.jsx)(a.Suspense,{children:(0,b.jsx)(I,{events:H,onClick:V,heading:e.heading})})}),-1==G?(0,b.jsx)(R,{}):(0,b.jsx)(a.Suspense,{children:(0,b.jsx)(x,{events:H,index:G,onBack:function(e){(0,d.n2)(M)&&(0,o.MO)("whatmoreAddedToCart")&&(0,m.D)(M,(()=>{}),100,window.location.hostname),A(-1)},slideDirection:O||"horizontal"===(0,d.e8)(M)?"horizontal":"vertical",eventsStories:U,initialStoryIndex:J,template:k})})]})};const P=function(e,t,n){const a=(0,o.MO)("whatmoreShopId");var r=t.reduce(((e,t,n)=>(t.products.map((e=>e.client_product_id)).forEach((t=>{t in e||(e[t]=!0)})),e)),{}),i=Object.keys(r);if("60960964855"==a&&"undefined"!=typeof fera&&"function"===typeof fera.getRatings){var c={};fera.getRatings(i,(e=>{new Promise(((t,n)=>{e.forEach((e=>{c[e.external_product_id]={avgRating:e.average,totalRatings:e.count}})),t(c)})).then((e=>n(e)))}))}if("23114481744"==a){const e="1e6MQXxzYR19mpw9Km6Dcm86";c={};fetch("https://api.juniphq.com/v1/products?filter[remote_ids]="+i.toString(),{headers:{"Junip-Store-Key":e}}).then((e=>e.json())).then((e=>(e.products.forEach((e=>{c[e.remote_id]={avgRating:parseFloat(e.rating_average).toFixed(1),totalRatings:e.rating_count}})),c))).then((e=>n(e))).catch((e=>console.error(e)))}};var O=n(3388);var M=function(e){const[t,n]=(0,a.useState)(),[i,c]=(0,a.useState)(),{whatmoreIsStoriesTemplate:s}=(0,a.useContext)(v.I),{whatmoreIsCollectionsTemplate:h}=(0,a.useContext)(v.I),[m]=(0,o.j1)("whatmoreShopId"),[g]=(0,o.j1)("whatmoreCollectionId"),f=(0,d.cZ)(m)?window.location.href.split(/[?#]/)[0]:g,[y,T]=(0,o.j1)("productRatings");var _=(0,d.ef)(m)?r.Dm+"/v1/events/":r.Gc+"/v1/events/",S=(0,d.ef)(m)?r.Dm+"/collection/":r.Gc+"/collection/",w=e.shopId;return(0,a.useEffect)((()=>{(0,u.hb)()}),[]),(0,a.useEffect)((()=>{null==t||0==t.length||i||!(0,l.KE)()||(0,o.MO)("whatmoreVideoPlayerPoolInitiated")||(0,p.b5)(p.UD)}),[t]),(0,a.useEffect)((()=>{var e;e=h?S.toString()+"?store_id="+w.toString()+"&client_collection_id="+f:_.toString()+w.toString()+"?status="+"live,upcoming".toString()+"&is_active="+"true".toString()+(s?"&template_type=stories":""),fetch(e).then((e=>e.json())).then((e=>(0,O.kW)(e,h))).then((e=>s?e:(0,O.e8)(e,w))).then((e=>(null!=e&&0!=e.length&&(0,d.LU)(m)&&function(e,t,n){const a=setInterval((()=>{null===(0,o.MO)("productRatings")&&P(e,t,n)}),1e3);setTimeout((()=>{clearInterval(a)}),1e4)}(m,e,(e=>{T(e)})),e))).then((e=>{null==e||0==e.length||s||(0,d.NO)(w,e),n(e)})).catch((e=>{c(e.message)}))}),[]),null==t||0==t.length||i?(0,b.jsx)("div",{}):(function(e,t){if(null!=e){var n=0;e.forEach((e=>{e.index=n++}))}}(t),(0,b.jsx)("div",{children:(0,b.jsx)(E,{heading:e.heading,events:t})},"whatmore-main-coponent"))};var k=function(e){const[t]=(0,o.j1)("isInDesignMode"),[n]=(0,o.j1)("isDemoBrand"),[i]=(0,o.j1)("whatmoreShopId"),[c]=(0,o.j1)("whatmoreHeading"),[s]=(0,o.j1)("whatmorePrimaryColor"),[d]=(0,o.j1)("whatmoreSecondaryColor");return(0,a.useEffect)((()=>{(0,h.ll)(i)}),[]),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{children:t||n?(0,b.jsx)("div",{children:(0,b.jsx)(M,{heading:c,shopId:r.aA})}):(0,b.jsx)("div",{children:(0,b.jsx)(M,{heading:c,shopId:i})})})})}},499:function(e,t){t.Z={LIVE:{name:"LIVE",color:"gray.600"},UPCOMING:{name:"UPCOMING",color:"gray.600"},DEFAULT:{name:"LIVE EVENT",color:"gray.600"},COMPLETED:{name:"ENDED",color:"gray.600"}}},4897:function(e,t,n){var o=n(499);t.Z=class{static getEventStatus(e){e.time_zone="GMT+5:30";var t=e.start_time+":00",n=e.end_time,a=e.scheduled_date,r=e.status,i=e.time_zone;if(r.toUpperCase()==o.Z.LIVE.name)return{status:o.Z.LIVE,bannerText:" "+o.Z.LIVE.name+" ",timeToStartInMins:0};if(r.toUpperCase()==o.Z.UPCOMING.name){var c=new Date(a+" "+t+" "+i),s=(new Date(a+" "+n+" "+i),function(e){var t=new Date,n=(e.getTime()-t.getTime())/1e3,a=n/60,r=a/60,i=r/24;return n<=0?{status:o.Z.COMPLETED,bannerText:" "+o.Z.COMPLETED.name+" ",timeToStartInMins:0}:n>=1&&n<=30?{status:o.Z.UPCOMING,bannerText:"Starts in "+Math.round(n)+" sec ",timeToStartInMins:n/60}:a<60?{status:o.Z.UPCOMING,bannerText:"Starts in "+Math.round(a)+" min ",timeToStartInMins:a}:r<24?{status:o.Z.UPCOMING,bannerText:"Starts in "+Math.round(r)+" hr ",timeToStartInMins:60*r}:i<7?{status:o.Z.UPCOMING,bannerText:" "+["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]+" ",timeToStartInMins:60*i*24}:{status:o.Z.UPCOMING,bannerText:"Upcoming",timeToStartInMins:2880}}(c));return{status:s.status,bannerText:s.bannerText,timeToStartInMins:s.timeToStartInMins}}return console.error("invalid status for event :: id : "+e.event_id+", status : "+e.status),{status:o.Z.DEFAULT,bannerText:"live event",timeToStartInMins:2880}}}},941:function(e,t,n){n.d(t,{D:function(){return o}});const o=async function(e,t,n,o){if("STRNV8MHJTF"!=e&&"STR6HU283UZ"!=e&&"STR9T3LLEJB"!=e&&"STRWJMIOJNX"!=e&&"STRUDQ36YAC"!=e&&"STR1D5ONOZX"!=e){var a=await fetch("https://"+window.location.hostname+"/cart.js",{cache:"reload"}).then((e=>e.json()));if("27358003275"==e||"63748341981"==e||"68237558034"==e)document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{bubbles:!0,detail:{cart:a,openMiniCart:!0}}));else if("19506115"==e)window.PXUTheme.jsAjaxCart.showDrawer(),window.PXUTheme.jsAjaxCart.updateView();else if("54465429691"==e)refreshCart(a),window.setTimeout((function(){$.fancybox.close(),$(".cart-button").click()}),500);else if("25427564"==e||"4243849314"==e){(new theme.CartDrawer).open()}else"62602182872"==e||"57362710572"==e?(CartJS.getCart(),$(".block-cart").addClass("active")):"60492578980"==e||"12183765088"==e||"58546946211"==e||"42070737058"==e||"71321583919"==e||"68492624171"==e||"74541891876"==e?(document.documentElement.dispatchEvent(new CustomEvent("ajaxProduct:added",{bubbles:!0,detail:{}})),document.documentElement.dispatchEvent(new CustomEvent("cart:open",{bubbles:!0,detail:{}}))):"36300750986"==e||"2665447536"==e?fetch("/?section_id=cart-drawer").then((e=>e.text())).then((e=>{const t=(new DOMParser).parseFromString(e,"text/html").getElementById("cart-drawer").innerHTML;$("#cart-drawer").html(t),$('[aria-controls="cart-drawer"]')[0].click(),$(".header__cart-count .count-bubble ").html(cart.item_count).css("opacity",1)})):"57824805033"==e?fetch("/cart.json").then((e=>e.json())).then((e=>{fetch("/cart?view=item").then((e=>e.text())).then((t=>{const n=(new DOMParser).parseFromString(t,"text/html"),o=n.getElementById("CartDrawer"),a=document.getElementById("CartDrawer");o&&a&&(a.innerHTML=o.innerHTML),n.querySelector("#CartDrawer .totals__subtotal-value");const r=document.querySelector("cart-drawer");r&&r.classList.remove("is-empty");const i=document.querySelector("cart-drawer-items");i&&i.classList.remove("is-empty");const c=document.getElementById("cart-icon-bubble");if(c.querySelector(".cart-count-bubble"))c.querySelectorAll('.cart-count-bubble span[aria-hidden="true"]').forEach((t=>{t.textContent=e.item_count}));else{const t=document.createElement("div");t.className="cart-count-bubble",t.innerHTML='\n                            <span aria-hidden="true">'.concat(e.item_count,'</span>\n                            <span class="visually-hidden">').concat(e.item_count," items</span>\n                        "),c.appendChild(t)}c.click(),document.getElementById("CartDrawer-Overlay").addEventListener("click",(()=>{const e=document.querySelector("cart-drawer");e&&e.classList.remove("active"),document.body.classList.remove("overflow-hidden")}))}))})):document.documentElement.dispatchEvent(new CustomEvent("product:added",{bubbles:!0,detail:{}}));setTimeout(t,n)}else{console.log("Executing cart refresh script..");document.getElementById("whatsmorecart").value=Math.random()}}},3388:function(e,t,n){n.d(t,{e8:function(){return r},kT:function(){return o},kW:function(){return i},xg:function(){return a}});const o=function(e,t){return!((void 0==e.products||0==e.products.length)&&(void 0==e.cta||0==e.cta.length))},a=function(e,t){return!(void 0==e.products||0==e.products.length)},r=function(e,t){if(null!=e)return e.filter((e=>1==o(e)))},i=function(e,t){if(null!=e)return t?e[0].events:e}},7300:function(e,t,n){n.d(t,{B6:function(){return o},WJ:function(){return a},yC:function(){return r}});const o=function(e){return"video"===e.event_type},a=function(e){return"image"===e.event_type},r=function(e){return"livestream"===e.event_type}},6524:function(e,t,n){n.d(t,{Q:function(){return i},z:function(){return r}});const o={ta:"template-a",ta1:"template-a-1",tb:"template-b",tc:"template-c",td:"template-d",te:"template-e",te:"template-embed",tsa:"template-stories-a",tsb:"template-stories-b",tfa:"template-feed-a",tca:"template-collections-a",tcb:"template-collections-b",tcc:"template-collections-c",tcd:"template-collections-d",tce:"template-collections-e"},a={"template-a":"ta","template-a-1":"ta1","template-c":"tc","template-d":"td","template-e":"te","template-b":"tb","template-embed":"te","template-stories-a":"tsa","template-stories-b":"tsb","template-feed-a":"tfa","template-collections-a":"tca","template-collections-b":"tcb","template-collections-c":"tcc","template-collections-d":"tcd","template-collections-e":"tce"},r=function(e){return o[e]},i=function(e){return a[e]}},5160:function(e,t,n){n.d(t,{$L:function(){return d},JX:function(){return s},Z6:function(){return r},rp:function(){return u},wh:function(){return a},wz:function(){return c},x0:function(){return i}});var o=n(2860);n(7753);function a(e){console.debug("updating user view count for event.");const t={event_id:e.event_id,increase_by:1};fetch(o.Gc+"/event/metrics/views",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>(console.debug("updating user view count response : HTTP "+e.status),e.json()))).then((e=>{console.debug("updating user view count response : "+JSON.stringify(e))})).catch((e=>{console.error("error updating user view count user for event : ",e)}))}function r(e,t){console.debug("updating like count for event.");const n={event_id:e.event_id,increase_by:t};fetch(o.Gc+"/event/metrics/like",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>(console.debug("updating like count response : HTTP "+e.status),e.json()))).then((e=>{console.debug("updating like count response : "+JSON.stringify(e))})).catch((e=>{console.error("error updating like count user for event : ",e)}))}function i(e){console.debug("updating share count for event.");const t={event_id:e.event_id,increase_by:1};fetch(o.Gc+"/event/metrics/share",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>(console.debug("updating share count response : HTTP "+e.status),e.json()))).then((e=>{console.debug("updating share count response : "+JSON.stringify(e))})).catch((e=>{console.error("error updating share count user for event : ",e)}))}function c(e,t){console.debug("updating event-product click count for event {} and product {}.",e.event_id,t.product_id);const n={event_id:e.event_id,product_id:t.product_id,increase_by:1};fetch(o.Gc+"/event/metrics/clicks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>(console.debug("updating user event-product click count response : HTTP "+e.status),e.json()))).then((e=>{console.debug("updating user event-product click count response : "+JSON.stringify(e))})).catch((t=>{console.error("error updating user event-product click count for event {} : ",e.event_id,t)}))}function s(e,t,n){console.debug("updating event-product add to cart count for event {} and product {}.",e.event_id,t.product_id);const a={event_id:e.event_id,product_id:t.product_id,increase_by:n};fetch(o.Gc+"/event/metrics/add_to_cart",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>(console.debug("updating user event-product add to cart count response : HTTP "+e.status),e.json()))).then((e=>{console.debug("updating user event-product add to cart count response : "+JSON.stringify(e))})).catch((t=>{console.error("error updating user event-product add to cart count for event {} : ",e.event_id,t)}))}function d(e,t){console.debug("updating event-product buy now count for event {} and product {}.",e.event_id,t.product_id);const n={event_id:e.event_id,product_id:t.product_id,increase_by:1};fetch(o.Gc+"/event/metrics/buy_now",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>(console.debug("updating user event-product buy now count response : HTTP "+e.status),e.json()))).then((e=>{console.debug("updating user event-product buy now count response : "+JSON.stringify(e))})).catch((t=>{console.error("error updating user event-product buy now count for event {} : ",e.event_id,t)}))}async function u(){let{storeId:e="",eventId:t=0,productId:n="",variantId:a="",cartToken:r="",checkoutToken:i="",quantity:c=0,price:s="",actionType:d="",trackingId:u=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l={event_id:t,product_id:n,cart_token:r,checkout_token:i,quantity:c,price:s,variant_id:a,action_type:d,tracking_id:u};console.debug("initiating ATC metadata event for eventId {}, productId {}, variantId {} ",t,n,a);const p=await fetch(o.Gc+"/cart-metadata/"+e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(l)}).then((e=>(console.debug("initiating ATC metadata event for eventId {}, productId {}, variantId {} : HTTP "+e.status),e.json()))).catch((e=>{console.error("error initiating ATC metadata event for eventId {}, productId {}, variantId {} : ",t,n,a)}));return p}},4669:function(e,t,n){n.d(t,{Tc:function(){return l},ll:function(){return u}});var o=n(1824),a=n(7786),r=n(9854);n(7753);const i="Whatmore Video Shopping",c="Video View",s={carousel:"Carousel",stories:"Stories",video_popup:"Video Popup"},d={homepage:"Home Page",product_page:"Product Page"};async function u(e){if((0,r.Dv)(e)&&null!==(0,r.hf)(e)&&(a.ZP.initialize((0,r.hf)(e)),console.debug("Whatmore: initialized GA4")),(0,r.hv)(e)&&null!==(0,r.BH)(e)){const t=(0,r.OQ)(e);o.ZP.initialize((0,r.BH)(e),{useExistingGa:t}),console.debug("Whatmore: initialized GA3")}}async function l(e,t,n){(0,r.hv)(e)&&null!==(0,r.BH)(e)&&(o.ZP.event({category:i,action:c,label:d[t]+":"+s[n]}),console.debug("Whatmore: pushed view event to GA3")),(0,r.Dv)(e)&&null!==(0,r.hf)(e)&&(a.ZP.event({category:i,action:c+":"+d[t]+":"+s[n],value:1,nonInteraction:!1}),console.debug("Whatmore: pushed view event to GA4"))}}}]);