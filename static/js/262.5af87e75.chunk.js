"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[262],{3262:function(t,e,r){r.r(e),r.d(e,{initiateCartSliderEvent:function(){return i}});var o=r(5830),n=r(1745);const i=async function(t,e,r,i,u="",c="",l="",d="",a="",s=""){const m=(0,o.Xd)("whatmoreLandingLocationType");if("STRNV8MHJTF"==t||"STR6HU283UZ"==t||"STR9T3LLEJB"==t||"STRWJMIOJNX"==t||"STRUDQ36YAC"==t||"STR1D5ONOZX"==t){console.log("Executing cart refresh script..");return void(document.getElementById("whatsmorecart").value=Math.random())}const p=t=>{let e=Array.from(t.querySelectorAll("product-form")).find((t=>t.querySelector('form > input[name="id"]')&&t.querySelector('form button[type="submit"]')));return e||(e=Array.from(t.querySelectorAll('form[action*="/cart/add"]')).find((t=>t.querySelector('button[type="submit"]')))),e},f=(t,e,r)=>{if(t){var o;t.hasAttribute("data-product-variant-id")&&t.setAttribute("data-product-variant-id",e),t.hasAttribute("data-product-id")&&t.setAttribute("data-product-id",r);let n=t.querySelector('input[name="id"]');if(n)n.setAttribute("value",e),n.hasAttribute("disabled")&&n.removeAttribute("disabled");else{const r=t.querySelector('select[name="id"]');if(r){const t=r.querySelector('option[selected="selected"]');t&&t.setAttribute("value",e)}}const i=t.querySelector('input[name="product-id"]');i&&i.setAttribute("value",r);const u=document.createElement("div");u.appendChild(t),document.body.appendChild(u),console.log(u,"formElement");const c=Array.from((null===(o=document.querySelectorAll("product-form"))||void 0===o?void 0:o.length)>0?document.querySelectorAll("product-form"):document.querySelectorAll('form[action*="/cart/add"]')).find((t=>{let r=t.querySelector('input[name="id"]');if(!r){const e=t.querySelector('select[name="id"]');if(e){r=e.querySelector('option[selected="selected"]')}}return r&&r.value==e}));return c}},v=t=>{const e=null===t||void 0===t?void 0:t.querySelector('button[type="submit"]');e&&e.click()},y=t=>{(0,n.js)().then((t=>t.json())).then((e=>{const r=e.items.find((e=>e.id==t)),o=r.key,i=r.quantity,u=r.properties;(0,n.CP)(o,i,u,l,d,a,!0,!0,!0)}))},h=t=>{t&&!m.startsWith("product")&&t.remove()},S=p(document);if(S||(null===S||void 0===S?void 0:S.length)>0){const t=f(S,u,c);v(t),setTimeout((()=>{y(u)}),500),h(t)}else{var b;fetch(null===s||void 0===s||null===(b=s.split("?"))||void 0===b?void 0:b[0]).then((t=>t.text())).then((t=>{const e=(new DOMParser).parseFromString(t,"text/html"),r=p(e);if(r||(null===r||void 0===r?void 0:r.length)>0){const t=f(r,u,c);v(t),setTimeout((()=>{y(u)}),500),h(t)}}))}setTimeout(e,r)}}}]);