"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[184],{7381:function(e,t,n){n.d(t,{E:function(){return r}});function o(e){console.debug("Whatmore : "+e)}function r(e){var t;const n=null!==(t="true"==localStorage.getItem("whatmoreActivateLogs"))&&void 0!==t&&t;n&&(o("total events received : "+(e&&e.length)),o("events data : "+JSON.stringify(e)))}},3388:function(e,t,n){n.d(t,{OC:function(){return c},e8:function(){return i},kT:function(){return o},kW:function(){return u},xg:function(){return r}});const o=function(e,t){return!((void 0==e.products||0==e.products.length)&&(void 0==e.cta||0==e.cta.length))},r=function(e,t){return!(void 0==e.products||0==e.products.length)},i=function(e,t){if(null!=e)return e.filter((e=>1==o(e)))},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=e)return t?e.events[0].events:e.events};const c=function(e,t){var n;if(null==e)return[];if(!("eventsets"in e))return[];const o=null!==(n=e.eventsets[t])&&void 0!==n?n:null;return o?function(e){if(null==e||0==e.length)return[];let t=[];return e.forEach((e=>{e.events.forEach((e=>{t.push(e)}))})),t}(o):[]}},2209:function(e,t,n){n.r(t);var o=n(7313),r=n(9854),i=n(2860),u=n(7753),c=n(5160),s=n(6967),l=n(5380),a=n(58),h=n(8984),d=n(4669),f=n(941),v=n(9302),g=n(7381),m=n(2575),p=n(7300),w=n(6524),E=n(3388),S=n(6417);const j=(0,m.Z)({key:"whatmore-css-wsv"}),k=o.lazy((()=>Promise.all([n.e(819),n.e(576),n.e(210),n.e(803),n.e(926),n.e(607),n.e(282),n.e(26)]).then(n.bind(n,2607))));t.default=function(e){const[t,n]=(0,o.useState)(),[m,x]=(0,o.useState)(),[O]=(0,u.j1)("isInDesignMode"),[M]=(0,u.j1)("isDemoBrand"),[_,b]=(0,o.useState)(-2),[y]=(0,u.j1)("whatmoreShopId"),C=(0,u.MO)("isLandingSharedLink"),I=(0,u.MO)("whatmoreShareTemplateId"),L=((0,u.MO)("whatmoreShareStoryId"),(0,u.MO)("whatmoreShareEventId")),D=(0,u.MO)("whatmoreLandingLocationType"),T=(0,u.MO)("whatmoreLoggingActive");var P=(0,r.ef)(y)?i.Dm+"/get_eventset/":i.Gc+"/get_eventset/";(0,o.useEffect)((()=>{(0,s.hb)()}),[]),(0,o.useEffect)((()=>{(0,d.ll)(y)}),[]),(0,o.useEffect)((()=>{null==t||0==t.length||m||!(0,h.KE)()||(0,u.MO)("whatmoreVideoPlayerPoolInitiated")||(0,a.b5)(a.UD)}),[t]),(0,o.useEffect)((()=>{b(-1);const e=w.NX,t=(0,w.H1)(D),o=P.toString()+y.toString()+"?eventset_type="+e+"&source="+t+"&source_id="+y;fetch(o).then((e=>e.json())).then((t=>(0,E.OC)(t,e))).then((e=>(n(e),e))).catch((e=>{x(e.message)}))}),[]),(0,o.useEffect)((()=>{b(-2)}),[t]),(0,o.useEffect)((()=>{null==t||0==t.length||m||C&&"template-embed"==(0,w.zv)(I)&&null!=L&&t.forEach(((e,t)=>{L==e.event_id&&A(e,!0,t)}))}),[t]);const A=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((0,h.KE)()&&!t&&(0,a.QV)(),(0,p.B6)(e)||(0,p.WJ)(e))return O||M||(async()=>{(0,c.wh)(e),(0,d.Tc)(y,i.h7,i.dU),(0,s.H4)(e.event_id,e.products,"spotlight","video_popup")})(),void b(n)};function B(){return(0,S.jsx)(S.Fragment,{})}return null==t||0==t.length||m?(0,S.jsx)("div",{}):(T&&(0,g.E)(t),(0,S.jsx)(v.C,{value:j,children:-1===_||0===t.length?(0,S.jsx)(B,{}):-2===_&&t.length>0?(0,S.jsx)("div",{children:(0,S.jsx)(l.Z,{event:t[0],inVideoClick:A,closeClick:e=>{e.stopPropagation(),b(-1)}})}):(0,S.jsx)("div",{children:(0,S.jsx)(o.Suspense,{children:(0,S.jsx)(k,{events:t,index:_,onBack:function(){(0,r.n2)(y)&&(0,u.MO)("whatmoreAddedToCart")&&(0,f.D)(y,(()=>{}),100,window.location.hostname),b(-2)},template:"template-embed"})})})}))}}}]);