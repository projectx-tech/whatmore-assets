"use strict";(self.webpackChunkwhatmorelive_react=self.webpackChunkwhatmorelive_react||[]).push([[277],{1351:function(e,t,n){n.d(t,{Qj:function(){return c},kz:function(){return d},UM:function(){return p},yP:function(){return h},DG:function(){return u}});var o=n(1348),a=n(5830),i=n(6157);const l=[22302,25292,22303,24099,21448,118713,142787,33063,25291,25290,21447,21450,21452,21449,22301,34595,36295,22304,22300,21451,24098,24090,34283,34285,54204,54210,25286,34630,24096,54211,21453,22306,33071,54251,33080,33100,33076,34632,25293,34640,142791,142789,142851,142896,142879,142906,142907,152096,117191,117148,117223,117229,117261,117269,149242,149243,164450];function r(e,t,n={},r){const s=(0,a.Xd)("whatmoreShopId");(e!=i.O.EVENT_VIEW||(0,o.NFF)(s))&&(e!=i.O.VIDEO_PLAYBACK||(0,o.Eel)(s))&&(e!=i.O.SHOPNOW_ATC_CLICKED&&e!=i.O.PRODUCT_TILE_ATC_CLICKED||(0,o.T9r)(s))&&(e!=i.O.VIDEO_LIKED||(0,o.Mz3)(s))&&(e!=i.O.VIDEO_SHARE_CTA_CLICKED||(0,o.OLZ)(s))&&(e!=i.O.PRODUCT_TILE_SHOPNOW_CLICKED&&e!=i.O.SHOPNOW_CLICKED||(0,o.nEf)(s))&&"function"==typeof fbq&&(async()=>{fbq("trackCustom",c[e],{id:null===t||void 0===t?void 0:t.client_product_id,product_url:null===t||void 0===t?void 0:t.product_link,...e===i.O.VIDEO_PLAYBACK?{watch_time:n.watch_time,video_duration:n.video_duration}:{}}),"20157815"==s&&e==i.O.EVENT_VIEW&&l.includes(null===r||void 0===r?void 0:r.event_id)&&fbq("trackCustom","whatmore_video_view_collection_necklace",{id:null===t||void 0===t?void 0:t.client_product_id,product_url:null===t||void 0===t?void 0:t.product_link})})()}var s=n(7145);const c={[i.O.EVENT_VIEW]:"whatmore_video_click_event",[i.O.VIDEO_LIKED]:"whatmore_video_like_event",[i.O.VIDEO_SHARE_CTA_CLICKED]:"whatmore_video_share_event",[i.O.PRODUCT_TILE_ATC_CLICKED]:"whatmore_video_atc_event",[i.O.SHOPNOW_ATC_CLICKED]:"whatmore_video_atc_event",[i.O.SHOPNOW_CLICKED]:"whatmore_product_tile_click_event",[i.O.PRODUCT_TILE_SHOPNOW_CLICKED]:"whatmore_product_tile_click_event",[i.O.VIDEO_PLAYBACK]:"whatmore_video_watch_event"};function d({userInteractionType:e,userInteractionMetadata:t,widgetSourceDetails:n,event:o,productList:a,ctaList:i}){var l;(0,s.B)({userInteractionType:e,userInteractionMetadata:t,widgetSourceDetails:n,event:o,productList:a,ctaList:i}),e in c&&r(e,null!==(l=null===a||void 0===a?void 0:a[1])&&void 0!==l?l:null===a||void 0===a?void 0:a[0],t,o)}function u({userInteractionType:e,userInteractionMetadata:t,widgetSourceDetails:n,event:o,productList:a,ctaList:i}){var l;(0,s.B)({userInteractionType:e,userInteractionMetadata:t,widgetSourceDetails:n,event:o,productList:a,ctaList:i}),e in c&&r(e,null!==(l=null===a||void 0===a?void 0:a[1])&&void 0!==l?l:null===a||void 0===a?void 0:a[0],t,o)}function p({userInteractionType:e,userInteractionMetadata:t,widgetSourceDetails:n,event:o,productList:a,ctaList:i}){(0,s.B)({userInteractionType:e,userInteractionMetadata:t,widgetSourceDetails:n,event:o,productList:a,ctaList:i})}function h({userInteractionType:e,userInteractionMetadata:t,widgetSourceDetails:n,event:o,productList:a,ctaList:i}){(0,s.B)({userInteractionType:e,userInteractionMetadata:t,widgetSourceDetails:n,event:o,productList:a,ctaList:i})}},7277:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var o=n(9950),a=n(964),i=n(140),l=n(5830),r=n(1348),s=n(4533),c=n(6613),d=n(1085),u=n(3330),p=n(5551),h=n(2039),m=n(4833),v=n(2979),g=n(6157),_=n(8945),S=n(9821),y=n(4414);const w=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(946),n.e(571),n.e(987),n.e(669),n.e(665)]).then(n.bind(n,7206)))),I=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(437),n.e(571),n.e(620),n.e(116)]).then(n.bind(n,7144)))),E=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(879),n.e(571),n.e(987),n.e(180),n.e(423)]).then(n.bind(n,517)))),f=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(879),n.e(571),n.e(987),n.e(180),n.e(412)]).then(n.bind(n,7646)))),O=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(879),n.e(571),n.e(987),n.e(180),n.e(221)]).then(n.bind(n,5451)))),x=o.lazy((()=>Promise.all([n.e(572),n.e(571),n.e(974)]).then(n.bind(n,3319)))),T=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(946),n.e(571),n.e(987),n.e(669),n.e(48),n.e(620),n.e(474)]).then(n.bind(n,6945)))),C=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(475),n.e(571),n.e(669),n.e(485)]).then(n.bind(n,9418)))),D=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(946),n.e(571),n.e(987),n.e(676)]).then(n.bind(n,3369)))),L=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(946),n.e(571),n.e(987),n.e(669),n.e(48),n.e(891)]).then(n.bind(n,7178)))),j=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(946),n.e(437),n.e(451),n.e(571),n.e(987),n.e(669),n.e(852),n.e(568),n.e(48),n.e(306)]).then(n.bind(n,9406)))),b=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(437),n.e(571),n.e(669),n.e(933)]).then(n.bind(n,6989)))),q=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(946),n.e(437),n.e(451),n.e(571),n.e(987),n.e(669),n.e(852),n.e(568),n.e(806)]).then(n.bind(n,3278)))),P=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(879),n.e(571),n.e(987),n.e(1)]).then(n.bind(n,4596)))),W=o.lazy((()=>Promise.all([n.e(572),n.e(304),n.e(317),n.e(526),n.e(946),n.e(437),n.e(451),n.e(571),n.e(987),n.e(669),n.e(852),n.e(568),n.e(328)]).then(n.bind(n,3568)))),N=o.lazy((()=>n.e(374).then(n.bind(n,5100))));var k=function(e){var t,k;const[A]=(0,l.QN)("isInDesignMode"),[V]=(0,l.QN)("isDemoBrand"),[$]=(0,l.QN)("whatmoreTopBottomPadding"),[B]=(0,l.QN)("whatmoreStoriesTopBottomPadding"),{whatmoreIsStoriesTemplate:G,whatmoreIsCollectionsTemplate:F}=(0,o.useContext)(p.B),[M]=(0,l.QN)("whatmoreShopId"),[R]=(0,l.QN)("whatmoreLandingLocationType"),{whatmoreEventsBrowsingTemplate:z}=(0,o.useContext)(p.B),K=(0,l.Xd)("isLandingSharedLink"),H=(0,l.Xd)("whatmoreShareTemplateId"),J=(0,l.Xd)("whatmoreShareStoryId"),U=(0,l.Xd)("whatmoreShareEventId"),{whatmoreWidgetSourceDetails:Q,whatmoreUserInfo:X}=(0,o.useContext)(p.B),Y=K&&z===(0,m.Mm)(H),[Z,ee]=(0,o.useState)(Y),[te,ne]=(0,o.useState)(-1),[oe,ae]=(0,o.useState)(null);let ie=e.events,le=null===e||void 0===e?void 0:e.allEvents,re=[...ie,...le];var se=null;G&&!se&&(se=function(e){var t=e.reduce(((e,t,n)=>{var o,a=t.storyset_id;return a in e?(e[a].total_events=e[a].total_events+1,e[a].events.push(t)):e[a]={id:t.storyset_id,title:t.storyset_name,thumbnail_image:t.storyset_thumbnail_image,total_events:1,start_event_index:n,storyset_dynamic_thumbnail:null!==(o=null===t||void 0===t?void 0:t.storyset_dynamic_thumbnail)&&void 0!==o&&o,events:[t]},e}),{}),n=Object.values(t);return n.sort(((e,t)=>e.start_event_index-t.start_event_index)),n}(ie));const ce=Q.landingLocationType,de=Q.templateType;function ue(e,t=!1,n=null){(0,c.MN)()&&(0,S._)()&&!t&&(0,d.bo)(),A||V||(async()=>{const t=se[e].events[0],n=(0,m.Wd)(ce)+(0,m.gf)(de)+(null!==t&&void 0!==t&&t.isRelatedEvent?"R":"E")+"_"+(null===t||void 0===t?void 0:t.event_id);(0,i.lB)(t),(0,u.Si)(M,a.TB,a.OL),(0,s.Ch)(t.event_id,t.products,"homepage","stories",n,null===t||void 0===t?void 0:t.location,null===X||void 0===X?void 0:X.userType)})();var o=0;null!=n&&se[e].events.map(((e,t)=>{e.event_id==n&&(o=t)})),ne(o),ae(e)}async function pe(e,t=!1){(0,c.MN)()&&(0,S._)()&&!t&&await(0,d.bo)(),ne(e.index),((0,h.ij)(e)||(0,h.Il)(e))&&(A||V||(async()=>{const t=(0,m.Wd)(ce)+(0,m.gf)(de)+(null!==e&&void 0!==e&&e.isRelatedEvent?"R":"E")+"_"+(null===e||void 0===e?void 0:e.event_id);(0,i.lB)(e),(0,u.Si)(M,a.TB,a.Dk),(0,s.Ch)(e.event_id,e.products,"homepage","carousel",t)})())}function he(e){return(0,y.jsx)(y.Fragment,{})}return(0,o.useEffect)((()=>{if(Y)if((0,_.H)("whatmore-video-player",(()=>{ee(!1)})),null!=J&&G){const e=se.find((e=>J==e.id));if(e)return void ue(se.indexOf(e),!0,U)}else if(null!=U){const e=re.find((e=>U==e.event_id));if(e)return void pe(e,!0)}}),[]),(0,y.jsxs)(y.Fragment,{children:[Z&&(0,y.jsx)(N,{}),-1==te||-2==te?(0,y.jsx)(he,{}):(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.EVENT_VIEW,event:ie[te],productList:null===(t=ie[te])||void 0===t?void 0:t.products,cta:null===(k=ie[te])||void 0===k?void 0:k.cta,triggerFlag:!A&&!V,children:(0,y.jsx)(W,{events:re,index:te,onBack:async function(){if((0,r.ei)(M)&&(0,l.Xd)("whatmoreAddedToCart")){(await n.e(852).then(n.bind(n,852)).then((e=>e.initiateCartSliderEvent)))(M,(()=>{}),100,window.location.hostname)}ne(-1),ee(!1)},slideDirection:G||"horizontal"===(0,r.br0)(M)?"horizontal":"vertical",eventsStories:se,initialStoryIndex:oe,template:z})})}),(0,y.jsx)("div",{className:"whatmore-widget-container",style:{height:"100%",marginTop:(G?B:$)+"px",marginBottom:(G?B:$)+"px"},children:"template-b"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.HOMEPAGE_CAROUSEL_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(w,{events:ie,onClick:pe,heading:e.heading})})}):"template-a-1"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(I,{events:ie,onClick:pe,heading:e.heading})}):"template-feed-a"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(b,{events:ie,onClick:pe,heading:e.heading})}):"template-collections-a"===z||"template-c"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.COLLECTION_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(E,{events:ie,index:te,setScreen:ne,onClick:pe,heading:e.heading})})}):"template-collections-b"===z||"template-d"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.COLLECTION_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(f,{events:ie,index:te,setScreen:ne,onClick:pe,heading:e.heading})})}):"template-collections-c"===z||"template-e"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.COLLECTION_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(O,{events:ie,index:te,setScreen:ne,onClick:pe,heading:e.heading})})}):"template-collections-d"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.COLLECTION_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(w,{events:ie,index:te,setScreen:ne,onClick:pe,heading:e.heading})})}):"template-collections-e"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.COLLECTION_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(T,{events:ie,index:te,setScreen:ne,onClick:pe,heading:e.heading})})}):"template-collections-stories"===z||"template-stories"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.COLLECTION_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(P,{events:ie,index:te,setScreen:ne,onClick:pe,heading:e.heading})})}):"template-f"===z||"template-collections-f"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.HOMEPAGE_CAROUSEL_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(C,{events:ie,onClick:pe,heading:e.heading})})}):"template-g"===z||"template-collections-g"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.HOMEPAGE_CAROUSEL_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(D,{events:ie,onClick:pe,heading:e.heading})})}):"template-h"===z||"template-collections-h"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.HOMEPAGE_CAROUSEL_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(L,{events:ie,onClick:pe,heading:e.heading})})}):"template-i"===z||"template-collections-i"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.HOMEPAGE_CAROUSEL_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(j,{index:te,events:ie,onClick:pe,heading:e.heading})})}):"template-banner-a"===z?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.BANNER_WIDGET_VIEW,event:ie[0],triggerFlag:!A&&!V,children:(0,y.jsx)(q,{events:ie})})}):G?(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.STORIES_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(x,{eventsStories:se,onClick:ue,template:z})})}):(0,y.jsx)(o.Suspense,{children:(0,y.jsx)(v.S,{userInteractionType:g.O.HOMEPAGE_CAROUSEL_WIDGET_VIEW,triggerFlag:!A&&!V,children:(0,y.jsx)(T,{events:ie,onClick:pe,heading:e.heading})})})})]})};const A=function(e,t,n){const o=(0,l.Xd)("whatmoreShopId");var a=t.reduce(((e,t,n)=>(t.products.map((e=>e.client_product_id)).forEach((t=>{t in e||(e[t]=!0)})),e)),{}),i=Object.keys(a);if("60960964855"==o&&"undefined"!=typeof fera&&"function"===typeof fera.getRatings){var r={};fera.getRatings(i,(e=>{new Promise(((t,n)=>{e.forEach((e=>{r[e.external_product_id]={avgRating:e.average,totalRatings:e.count}})),t(r)})).then((e=>n(e)))}))}if("23114481744"==o){const e="1e6MQXxzYR19mpw9Km6Dcm86";r={};fetch("https://api.juniphq.com/v1/products?filter[remote_ids]="+i.toString(),{headers:{"Junip-Store-Key":e}}).then((e=>e.json())).then((e=>(e.products.forEach((e=>{r[e.remote_id]={avgRating:parseFloat(e.rating_average).toFixed(1),totalRatings:e.rating_count}})),r))).then((e=>n(e))).catch((e=>console.error(e)))}};var V=n(7802),$=n(6641),B=n(1351),G=n(4820),F=n(5873),M=n(6018);var R=function(e){const[t,n]=(0,o.useState)(),[i,u]=(0,o.useState)([]),[h,v]=(0,o.useState)(),{whatmoreIsStoriesTemplate:_}=(0,o.useContext)(p.B),{whatmoreIsCollectionsTemplate:w}=(0,o.useContext)(p.B),{whatmoreIsBannerTemplate:I}=(0,o.useContext)(p.B),[E]=(0,l.QN)("whatmoreShopId"),[f]=(0,l.QN)("whatmoreCollectionId"),O=(0,l.Xd)("whatmoreLandingLocationType"),x=(0,l.Xd)("whatmoreLoggingActive"),{whatmoreWidgetSourceDetails:T}=(0,o.useContext)(p.B),{whatmoreUserInfo:C,whatmoreIsPreviewMode:D}=(0,o.useContext)(p.B),L=(0,l.Xd)("whatmoreCollectionUrl"),[j]=(0,l.QN)("isInDesignMode"),[b]=(0,l.QN)("isDemoBrand"),q=(0,r.mJ$)(E)?(0,r.jLA)(E)?L:window.location.href.split(/[?#]/)[0]:f,[P,W]=(0,l.QN)("productRatings"),[N,R]=(0,o.useState)(!1);var z=(0,r.SOt)(E)?a.aD+"/v2/events/":a.$$+"/v2/events/",K=(0,r.SOt)(E)?a.aD+"/v3/events/":a.$$+"/v3/events/",H=(0,r.SOt)(E)?a.aD+"/v4/events/":a.$$+"/v4/events/",J=(0,r.SOt)(E)?a.aD+"/v5/events/":a.$$+"/v5/events/",U=(0,r.SOt)(E)?a.aD+"/v6/events/":a.$$+"/v6/events/",Q=(0,r.SOt)(E)?a.aD+"/get_eventset/":a.$$+"/get_eventset/",X=(0,r.SOt)(E)?a.aD+"/v2/collection":a.$$+"/v2/collection",Y=(0,r.SOt)(E)?a.aD+"/v3/collection":a.$$+"/v3/collection",Z=(0,r.SOt)(E)?a.aD+"/v4/collection":a.$$+"/v4/collection",ee=(0,r.SOt)(E)?a.aD+"/v2/brand/"+E+"/product-events":a.$$+"/v2/brand/"+E+"/product-events",te=e.shopId,ne="live,upcoming",oe="true";return(0,o.useEffect)((()=>{(0,s.wm)();const e=()=>{const e="_whatmore_bulk_events",t=JSON.parse(localStorage.getItem(e))||[];t&&t.length>0&&((0,G.u)(t),localStorage.removeItem(e))};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[]),(0,o.useEffect)((()=>{null!=t&&0!=t.length&&!h&&(0,c.MN)()&&!(0,l.Xd)("whatmoreVideoPlayerPoolInitiated")&&(0,S._)()&&(0,d.Pc)(d.F5)}),[t]),(0,o.useEffect)((()=>{var e,t,o,a;if(O.startsWith("product"))if((0,r.vvU)(E))a=z.toString()+te.toString()+"?status="+ne.toString()+"&is_active="+oe.toString()+(_?"&template_type=stories":"");else{var i=(0,l.Xd)("whatmoreProductId");i=(0,r.BcY)(E)?function(e,t){return"STRQMPNF7QK"==t?encodeURIComponent(e):e.split(/[?#]/)[0]}(window.location.href,E):i,a=ee.toString()+"?client_product_id="+i.toString()+"&status="+ne.toString()+"&event_type=video"}else if(w||"invalid-url"!==L)a=(0,r.JwJ)(E)?`${Y.toString()}?store_id=${te.toString()}&client_collection_id=${"index"==O&&(0,r.FKG)(E).length>0?(0,r.FKG)(E)[0]:q}`:"78232846646"==E?`${Z.toString()}?store_id=${te.toString()}&client_collection_id=${"index"==O&&(0,r.FKG)(E).length>0?(0,r.FKG)(E)[0]:q}`:`${X.toString()}?store_id=${te.toString()}&client_collection_id=${"index"==O&&(0,r.FKG)(E).length>0?(0,r.FKG)(E)[0]:q}`;else if(I){const e=m.Jh,t=(0,m.t6)(O);a=Q.toString()+te.toString()+"?eventset_type="+e+"&source="+t+"&source_id="+E}else{var c,d,p,h;if(("72201044272"==E||"2665447536"==E&&D)&&!_)a=K.toString()+te.toString()+"?status="+ne.toString()+"&is_active="+oe.toString()+"&latitude="+(null!==(c=null===(d=JSON.parse(localStorage.getItem("_user_wh_lc")))||void 0===d?void 0:d.latitude)&&void 0!==c?c:"")+"&longitude="+(null!==(p=null===(h=JSON.parse(localStorage.getItem("_user_wh_lc")))||void 0===h?void 0:h.longitude)&&void 0!==p?p:"")+"&user_type="+(null!==C&&void 0!==C&&C.userType?"olduser":"newuser");else if((0,r.JwJ)(E)&&!_)a=H.toString()+te.toString()+"?status="+ne.toString()+"&is_active="+oe.toString();else if("78232846646"==E&&D){var g,S,y,f;a=U.toString()+te.toString()+"?status="+ne.toString()+"&is_active="+oe.toString()+"&latitude="+(null!==(g=null===(S=JSON.parse(localStorage.getItem("_user_wh_lc")))||void 0===S?void 0:S.latitude)&&void 0!==g?g:"")+"&longitude="+(null!==(y=null===(f=JSON.parse(localStorage.getItem("_user_wh_lc")))||void 0===f?void 0:f.longitude)&&void 0!==y?y:"")+"&user_type="+(null!==C&&void 0!==C&&C.userType?"olduser":"newuser")}else a="78232846646"==E?J.toString()+te.toString()+"?status="+ne.toString()+"&is_active="+oe.toString():z.toString()+te.toString()+"?status="+ne.toString()+"&is_active="+oe.toString()+(_?"&template_type=stories":"")}const T=null===(e=window)||void 0===e||null===(t=e.whatmore)||void 0===t||null===(o=t.storyEvents)||void 0===o?void 0:o.events;if(_&&O.startsWith("index")&&"object"==typeof T&&(null===T||void 0===T?void 0:T.length)>0){var P,N,k;const e=null===(P=window)||void 0===P||null===(N=P.whatmore)||void 0===N||null===(k=N.storyEvents)||void 0===k?void 0:k.events;n(e),R(!0)}else fetch(a).then((e=>e.json())).then((e=>{var t;if(I){const t=m.Jh;return(0,V.Po)(e,t)}if((0,r.JwJ)(E)&&(null===e||void 0===e||null===(t=e.questions)||void 0===t?void 0:t.length)>0&&(null==localStorage.getItem("_whatmore_qview_index")&&localStorage.setItem("_whatmore_qview_index",0),(0,s.d3)(null===e||void 0===e?void 0:e.questions)),null!==e&&void 0!==e&&e.all_events){let t=null===e||void 0===e?void 0:e.all_events;(0,r.xku)(E)||(t=(0,V.zJ)(null===e||void 0===e?void 0:e.all_events)),u(t)}return(0,V.Np)(e,w||"invalid-url"!==L)})).then((e=>{x&&console.debug("initial received events size : "+e.length);let t=e;return(0,r.xku)(E)||(t=(0,V.zJ)(e)),t})).then((e=>(("28849832033"===E||"85317058852"===E&&Array.isArray(e))&&(e=function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}(e)),null!=e&&0!=e.length&&(0,r.WiD)(E)&&function(e,t,n){const o=setInterval((()=>{null===(0,l.Xd)("productRatings")&&A(e,t,n)}),1e3);setTimeout((()=>{clearInterval(o)}),1e4)}(E,e,(e=>{W(e)})),e))).then((e=>{(b||j)&&(null==e||e&&0==(null===e||void 0===e?void 0:e.length))?n(_?M.Yo:I?M.N9:M.uG):n(e),R(!0)})).catch((e=>{v(e.message),R(!0)}))}),[]),(0,o.useEffect)((()=>{"index"===O?t&&t.length>0&&(0,B.yP)({userInteractionType:g.O.HOMEPAGE_VISITED,widgetSourceDetails:T}):"collection"===O&&(t&&t.length>0||(0,r.BZ$)(E))&&(0,B.yP)({userInteractionType:g.O.COLLECTION_PAGE_VISITED,widgetSourceDetails:T})}),[t]),N&&(null==t||0==t.length||h)&&F.Sn.forEach((e=>{var t,n,o,a;const i=null!==(t=e.querySelector('.whatmore-template-type[data-wh="template-stories-a"]'))&&void 0!==t?t:e.querySelector('.whatmore-template-type[data="template-stories-a"]'),l=null!==(n=e.querySelector('.whatmore-template-type[data-wh="template-a"]')||e.querySelector('.whatmore-template-type[data-wh="template-feed-a"]')||e.querySelector('.whatmore-template-type[data-wh="template-b"]')||e.querySelector('.whatmore-template-type[data-wh="template-f"]')||e.querySelector('.whatmore-template-type[data-wh="template-stories"]')||e.querySelector('.whatmore-template-type[data-wh="template-e"]')||e.querySelector('.whatmore-template-type[data-wh="template-a-1"]')||e.querySelector('.whatmore-template-type[data-wh="template-g"]')||e.querySelector('.whatmore-template-type[data-wh="template-h"]'))&&void 0!==n?n:e.querySelector('.whatmore-template-type[data="template-a"]')||e.querySelector('.whatmore-template-type[data="template-b"]')||e.querySelector('.whatmore-template-type[data="template-f"]')||e.querySelector('.whatmore-template-type[data="template-stories"]')||e.querySelector('.whatmore-template-type[data="template-e"]')||e.querySelector('.whatmore-template-type[data="template-a-1"]')||e.querySelector('.whatmore-template-type[data="template-g"]')||e.querySelector('.whatmore-template-type[data="template-h"]'),r=null!==(o=e.querySelector('.whatmore-template-type[data-wh="template-collections-a"]')||e.querySelector('.whatmore-template-type[data-wh="template-collections-b"]')||e.querySelector('.whatmore-template-type[data-wh="template-collections-c"]')||e.querySelector('.whatmore-template-type[data-wh="template-collections-stories"]')||e.querySelector('.whatmore-template-type[data-wh="template-collections-d"]')||e.querySelector('.whatmore-template-type[data-wh="template-collections-e"]')||e.querySelector('.whatmore-template-type[data-wh="template-collections-f"]')||e.querySelector('.whatmore-template-type[data-wh="template-collections-g"]')||e.querySelector('.whatmore-template-type[data-wh="template-collections-h"]'))&&void 0!==o?o:e.querySelector('.whatmore-template-type[data="template-collections-a"]')||e.querySelector('.whatmore-template-type[data="template-collections-b"]')||e.querySelector('.whatmore-template-type[data="template-collections-c"]')||e.querySelector('.whatmore-template-type[data="template-collections-stories"]')||e.querySelector('.whatmore-template-type[data="template-collections-e"]')||e.querySelector('.whatmore-template-type[data="template-collections-d"]')||e.querySelector('.whatmore-template-type[data="template-collections-f"]')||e.querySelector('.whatmore-template-type[data="template-collections-g"]')||e.querySelector('.whatmore-template-type[data="template-collections-h"]'),s=null!==(a=e.querySelector('.whatmore-template-type[data-wh="template-banner-a"]'))&&void 0!==a?a:e.querySelector('.whatmore-template-type[data="template-banner-a"]'),c=e;if(_){const t=e.querySelector(".whatmore-shimmer-stories");t&&(t.style.display="none")}else if(!w){const t=e.querySelector(".loading-skeleton-wrapper");t&&(t.style.display="none")}(s||r||l||i)&&(l&&c||i&&c||s&&c||r&&c)&&(c.style.minHeight="0px")})),null==t||0==t.length||h?(0,y.jsx)("div",{}):(x&&(0,$.xv)(t),function(e){if(null!=e){var t=0;e.forEach((e=>{e.index=t++}))}}([...t,...i]),x&&console.debug("final transformed events data : "+JSON.stringify(t)),x&&console.debug("valid events size : "+t.length),(0,y.jsx)(k,{heading:e.heading,events:t,allEvents:i}))}},8945:function(e,t,n){function o(e,t){let n=0;let o=new MutationObserver((function(){document.querySelector("."+e)?(t(),o.disconnect()):0==n&&(n=1,setTimeout((()=>{t(),o.disconnect()}),8e3))}));o.observe(document.body,{childList:!0,subtree:!0})}n.d(t,{H:function(){return o}})}}]);